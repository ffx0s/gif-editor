webpackJsonp([13],{"/epL":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("EuXz"),o=(n.n(i),n("mJx5")),a=(n.n(o),n("Z60a")),r=n.n(a),s=n("C9uT"),l=n.n(s),c=Array.prototype.slice,u=function(){function e(){r()(this,e),this.events={}}return l()(e,[{key:"on",value:function(e,t,n){var i=this;return e.split(" ").forEach(function(e){i.events[e]||(i.events[e]=[]),t&&i.events[e].push({fn:t,once:n})}),i}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"emit",value:function(e){var t=this,n=c.call(arguments,1);e.split(" ").forEach(function(e){var i=t.events[e];if(i)for(var o=i.length,a=0;a<o;a++){var r=i[a];r&&(i[a].fn.apply(t,n),i[a].once&&i.splice(a--,1))}})}},{key:"off",value:function(e,t){var n=this,i=n.events[e];if(i){if(!t)return void(n.events[e]=[]);for(var o=i.length,a=0;a<o;a++)if(i[a]&&i[a].fn===t){i.splice(a,1);break}}else e||(n.events={})}}]),e}()},0:function(e,t,n){e.exports=n("NHnr")},"6fgr":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),t["g"]=l,n.d(t,"f",function(){return c}),n.d(t,"i",function(){return u}),n.d(t,"j",function(){return d}),t["a"]=p,t["h"]=m,t["d"]=g,t["e"]=y,t["c"]=b;var i=n("Biqn"),o=n.n(i),a=n("y9m4"),r=(n.n(a),n("MfeA")),s=(n.n(r),function(){var e=document.createElement("canvas"),t=!(!e.getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp");e=null}(),function(){var e=navigator.userAgent;return{chrome:e.indexOf("Chrome")>-1&&-1===e.indexOf("Edge"),trident:e.indexOf("Trident")>-1,webkit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),mac:e.indexOf("Mac")>-1,ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,weixin:e.indexOf("MicroMessenger")>-1}}());function l(){}var c="ontouchend"in document,u=document.documentElement.clientHeight,d=function(){var e=null;return p(window,"resize",function(){clearTimeout(e),e=setTimeout(function(){d=document.documentElement.clientWidth,u=document.documentElement.clientHeight},300)}),document.documentElement.clientWidth}(),f=!1;try{var h=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassive",null,h),window.removeEventListener("testPassive",null,h)}catch(e){throw""}function p(e,t,n,i){e.addEventListener(t,n,f?o()({capture:!1,passive:!0,once:!1},i):!!i)}function m(e,t,n,i){e.removeEventListener(t,n,i)}function v(e){return"number"===typeof e&&e!==1/0&&!isNaN(e)}function g(e,t,n){return!!(e&&v(e.x)&&v(e.y)&&v(e.width)&&v(e.height)&&v(t)&&v(n))&&!(t<e.x||t>e.x+e.width||n<e.y||n>e.y+e.height)}function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t){"string"===typeof e&&"#"===e[0]&&(e=window.parseInt(e.slice(1),16)),t=void 0===t?1:t;var n=e>>16&255,i=e>>8&255,o=255&e,a=t<0?0:t>1?1:t;return 1===a?"rgb(".concat(n,", ").concat(i,", ").concat(o,")"):"rgba(".concat(n,", ").concat(i,", ").concat(o,", ").concat(a,")")}},AaU6:function(e,t){},"FR/Q":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,".icon-btn[data-v-0fb4713d]{width:2.1875rem;height:2.1875rem;padding:0;cursor:pointer;color:#fff;border:none;background:transparent}.icon-btn i[data-v-0fb4713d]{display:inline-block}.icon-btn[data-v-0fb4713d]:disabled{opacity:.5;cursor:default}.icon-btn.active i[data-v-0fb4713d]{-webkit-animation-name:icon-animate-data-v-0fb4713d;animation-name:icon-animate-data-v-0fb4713d;-webkit-animation-duration:.4s;animation-duration:.4s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:1;animation-iteration-count:1}@-webkit-keyframes icon-animate-data-v-0fb4713d{50%{opacity:.3;-webkit-transform:scale(1.6) translateZ(0);transform:scale(1.6) translateZ(0)}}@keyframes icon-animate-data-v-0fb4713d{50%{opacity:.3;-webkit-transform:scale(1.6) translateZ(0);transform:scale(1.6) translateZ(0)}}",""])},Fmek:function(e,t,n){var i=n("FR/Q");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("rjj0").default;o("5b91461c",i,!0,{shadowMode:!1,sourceMap:!1})},H6T0:function(e,t,n){var i=n("VpHb");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("rjj0").default;o("378fd27c",i,!0,{shadowMode:!1,sourceMap:!1})},IcnI:function(e,t,n){"use strict";var i=n("/5sW"),o=n("NYxO"),a=n("QmSG"),r={direction:"forward",historyPage:{}},s={updateDirection:function(e,t){e.direction=t.direction},saveScrollTop:function(e,t){var n=t.path,i=t.scrollTop,o=t.hash;e.historyPage[n]||(e.historyPage[n]={}),e.historyPage[n].scrollTop=i,e.historyPage[n].hash=o}},l={direction:function(e){return e.direction},historyPage:function(e){return e.historyPage}},c={state:r,mutations:s,getters:l},u=n("NM/j"),d=n.n(u),f=(n("EuXz"),n("lYqf")),h={file:null,loadProgress:0,parseProgress:0,status:0,frameIndex:0,frameLength:0,pause:!0,disableUndo:!0,disableRedo:!0,currentAction:""},p={file:function(e,t){e.file=t,t&&(e.status=1)},progress:function(e,t){var n=t.name,i=t.value;e["".concat(n,"Progress")]=i},status:function(e,t){e.status=t},frameIndex:function(e,t){e.frameIndex=t},frameLength:function(e,t){e.frameLength=t},pause:function(e,t){e.pause=t},undoRedostatus:function(e,t){var n=d()(t,2),i=n[0],o=n[1];e.disableUndo=i,e.disableRedo=o},currentAction:function(e,t){e.currentAction=t}},m={load:function(e){var t=e.commit,n=e.state;n.file&&(t("file",n.file),t("status",2),f["a"].gif.load(n.file),t("file",null))},play:function(e){var t=e.commit;f["a"].gif.play(),t("pause",!1)},pause:function(e){var t=e.commit;f["a"].gif.pause(),t("pause",!0)},reset:function(e){var t=e.commit;f["a"].reset(),setTimeout(function(){t("status",0)})}},v={loadProgress:function(e){return e.loadProgress},parseProgress:function(e){return e.parseProgress},status:function(e){return e.status},frameIndex:function(e){return e.frameIndex},frameLength:function(e){return e.frameLength},pause:function(e){return e.pause},disableUndo:function(e){return e.disableUndo},disableRedo:function(e){return e.disableRedo},currentAction:function(e){return e.currentAction}},g={state:h,mutations:p,actions:m,getters:v};n("hKoQ").polyfill(),i["a"].use(o["a"]);t["a"]=new o["a"].Store({modules:{page:c,edit:g},strict:a["isDev"]})},MTz1:function(e,t,n){var i=n("PS7y");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("rjj0").default;o("1c1a3cbe",i,!0,{shadowMode:!1,sourceMap:!1})},MWF8:function(e,t,n){var i={"./Editor":["pBS4",1,0],"./Editor/":["pBS4",1,0],"./Editor/index":["pBS4",1,0],"./Editor/index.vue":["pBS4",1,0],"./Editor/modules/Canvas":["N0bn",0,7],"./Editor/modules/Canvas.vue":["N0bn",0,7],"./Editor/modules/Download":["lbb4",0,9],"./Editor/modules/Download.vue":["lbb4",0,9],"./Editor/modules/PencilTool":["89Hp",0,10],"./Editor/modules/PencilTool.vue":["89Hp",0,10],"./Editor/modules/PlayController":["MLDf",0,5],"./Editor/modules/PlayController.vue":["MLDf",0,5],"./Editor/modules/TextTool":["2deL",0,8],"./Editor/modules/TextTool.vue":["2deL",0,8],"./Editor/modules/ToolLayout":["QXMH",0],"./Editor/modules/ToolLayout.vue":["QXMH",0],"./Editor/modules/Tools":["sJLE",6],"./Editor/modules/Tools.vue":["sJLE",6],"./Gallery":["fvYi",4],"./Gallery/":["fvYi",4],"./Gallery/index":["fvYi",4],"./Gallery/index.vue":["fvYi",4],"./Home":["esL9",0,2],"./Home/":["esL9",0,2],"./Home/images/bg.jpg":["jLhC",11],"./Home/index":["esL9",0,2],"./Home/index.vue":["esL9",0,2],"./PageNotFound":["ZzKa",3],"./PageNotFound/":["ZzKa",3],"./PageNotFound/index":["ZzKa",3],"./PageNotFound/index.vue":["ZzKa",3]};function o(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}o.keys=function(){return Object.keys(i)},o.id="MWF8",e.exports=o},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Biqn"),o=n.n(i),a=n("/5sW"),r=n("NYxO"),s=(n("EuXz"),n("VjuZ"),n("IcnI")),l=n("6fgr"),c=function(){var e=document.getElementById("loading");function t(e){return e?"show":"hide"}return function(n){var i=t(-1===e.className.indexOf("hide")),o=t(n.show),a=n.show&&n.background?"background":"";("show"!==i||"show"!==o||n.replace)&&(e.className="loading ".concat(a," ").concat(o))}}();function u(e,t){if(l["b"].weixin){var n=5,i=0,o=null;Object(l["a"])(e,"touchstart",function(n){i=n.touches[0].pageY,o=e.querySelector(t)}),Object(l["a"])(e,"touchmove",function(e){var t=i-e.touches[0].pageY,a=t<-n,r=t>n;o&&(a&&o.scrollTop<=0||r&&Math.floor(o.scrollHeight-l["i"])<=o.scrollTop)&&e.preventDefault()},{passive:!1})}}function d(e){e.back=!1,e.go=!0,e.reset=function(){e.back=!1,e.go=!1};var t=0;return Object(l["a"])(document,"touchstart",function(n){t=n.changedTouches[0].clientX,e.reset()}),Object(l["a"])(document,"touchmove",function(){var n=l["j"]/2;e.go=t>n,e.back=t<n}),e}function f(){var e=0;document.addEventListener("touchend",function(t){var n=Date.now();n-e<=300&&t.preventDefault(),e=n},!1)}function h(e){return e.$el.querySelector(".page-content")}function p(e,t){var n=h(e);n&&(n.scrollTop=t)}function m(e,t){var n=s["a"].state.page.historyPage[t.fullPath]||{},i=n.scrollTop||0,o=t.hash||n.hash;if(o){var a=e.$el.querySelector(o);i=a?a.offsetTop:0}p(e,i)}function v(e,t){var n=h(e);s["a"].commit("saveScrollTop",{path:t.fullPath,scrollTop:n?n.scrollTop:0})}var g=function(){var e=[],t=[],n=[];return function(i,o){if(i.name&&-1!==e.indexOf(i.name))return n.length=0,!1;if(o.name&&-1!==e.indexOf(o.name))return n.push(i.fullPath),!0;if(i.name&&-1!==t.indexOf(i.name))return n.push(i.fullPath),!0;var a=n.indexOf(i.fullPath);return-1!==a?(n.length=a+1,!1):(n.push(i.fullPath),!0)}}(),y={name:"App",computed:o()({},Object(r["b"])({direction:"direction"}),{transitionName:function(){return this.direction?"page-"+("forward"===this.direction?"in":"out"):""}}),mounted:function(){u(this.$el,".page-content"),f()}},b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:e.transitionName}},[n("keep-alive",[e.$route.meta.keepAlive?n("router-view",{staticClass:"page-view"}):e._e()],1)],1),n("transition",{attrs:{name:e.transitionName}},[e.$route.meta.keepAlive?e._e():n("router-view",{staticClass:"page-view"})],1)],1)},w=[],x=n("XyMi");function k(e){n("kG3Q")}var A=!1,E=k,C=null,P=null,I=Object(x["a"])(y,b,w,A,E,C,P),T=I.exports,B=n("/ocq"),j=n("/epL"),O=new j["a"],z={};d(z),O.on("UPDATE_DIRECTION",function(e,t){s["a"].commit("updateDirection",{direction:g(e,t)?z.go?"":"forward":z.back?"":"reverse"}),z.reset()});var S=O;function F(e){return function(){return n("MWF8")("./"+e)}}a["a"].use(B["a"]);var M=[{path:"/",name:"home",meta:{keepAlive:!0,title:"上传GIF"},component:F("Home")},{path:"/gallery",name:"gallery",meta:{keepAlive:!0,title:"gallery"},component:F("Gallery")},{path:"/editor",name:"editor",meta:{keepAlive:!0,title:"GIF编辑器"},component:F("Editor")},{path:"/404",name:"404",meta:{keepAlive:!0,title:"404"},component:F("PageNotFound")},{path:"*",redirect:{name:"404"}}],U=new B["a"]({routes:M,linkActiveClass:"active"});U.beforeEach(function(e,t,n){c({show:!0}),S.emit("UPDATE_DIRECTION",e,t),n()}),U.afterEach(function(e){c({show:!1}),S.emit("STATS",e)}),a["a"].mixin({beforeRouteEnter:function(e,t,n){n(function(t){m(t,e)})},beforeRouteLeave:function(e,t,n){v(this,t),n()}});var Y=U,D=n("iClD"),G=n("AaU6"),R={props:{scroll:{type:Boolean,required:!1,default:!0}}},q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"page-content",class:this.scroll?"scroll":"hidden"},[e._t("default")],2),n("div",{staticClass:"page-shadow-effect"}),n("div",{staticClass:"page-opacity-effect"})])},L=[];function N(e){n("MTz1")}var H=!1,Q=N,Z=null,W=null,J=Object(x["a"])(R,q,L,H,Q,Z,W),K=J.exports,X={props:{iconClass:{type:String,default:""}},data:function(){return{isActive:!1}},methods:{onClick:function(){var e=this;this.isActive=!0,setTimeout(function(){e.isActive=!1},450)}}},V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"icon-btn",class:{active:e.isActive},on:{click:e.onClick,touchend:function(e){e.stopPropagation()}}},[n("i",{staticClass:"iconfont",class:e.iconClass})])},_=[];function $(e){n("Fmek")}var ee=!1,te=$,ne="data-v-0fb4713d",ie=null,oe=Object(x["a"])(X,V,_,ee,te,ne,ie),ae=oe.exports,re=(n("n12u"),{name:"Modal",props:{showConfirmButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!1}}}),se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask",on:{touchmove:function(e){e.preventDefault()}}},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container"},[n("div",{staticClass:"modal-header"},[e._t("header")],2),n("div",{staticClass:"modal-body"},[e._t("body")],2),n("div",{staticClass:"modal-footer"},[e._t("footer",[n("button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],staticClass:"modal-default-button btn-info",on:{click:function(t){e.$emit("confirm")}}},[e._v("\n              确定\n            ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.showCancelButton,expression:"showCancelButton"}],staticClass:"modal-default-button btn-white",on:{click:function(t){e.$emit("cancel")}}},[e._v("\n              取消\n            ")])])],2)])])])])},le=[];function ce(e){n("H6T0")}var ue=!1,de=ce,fe="data-v-6be3f571",he=null,pe=Object(x["a"])(re,se,le,ue,de,fe,he),me=pe.exports,ve={install:function(e){var t=e.extend({render:function(e){var t=this;if(t.show)return e(me,{on:{cancel:function(){t.cancel()||(t.show=!1)},confirm:function(){t.confirm()||(t.show=!1)}},props:{showCancelButton:t.showCancelButton,showConfirmButton:t.showConfirmButton}},[e("div",{slot:"body",domProps:{innerHTML:t.body}})])},data:function(){return{show:!1,body:"",confirm:function(){},cancel:function(){},showCancelButton:!1,showConfirmButton:!0}},componetms:{Modal:me}}),n=new t({el:document.createElement("div")});document.body.appendChild(n.$el),e.prototype.$alert=function(e){Object.assign(n,{show:!0,body:"",showCancelButton:!1,showConfirmButton:!0,cancel:function(){},confirm:function(){}},e)},e.prototype.$confirm=function(e){Object.assign(n,{show:!0,body:"",showCancelButton:!0,showConfirmButton:!0,cancel:function(){},confirm:function(){}},e)}}},ge={props:{value:{type:String,default:""},show:{type:Boolean,default:!1},clearValue:{type:Boolean,default:!0}},methods:{cancle:function(){this.reset()},confirm:function(){this.$emit("on-confirm",this.value),this.reset()},reset:function(){var e=this;this.$emit("update:show",!1),this.clearValue&&setTimeout(function(){e.$emit("input","")},300)},updateValue:function(e){this.$emit("input",e)}}},ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"textarea-input item-center"},[n("textarea",{staticClass:"textarea",attrs:{placeholder:"点击输入文字",autofocus:""},domProps:{value:e.value},on:{input:function(t){e.updateValue(t.target.value)}}}),n("div",{staticClass:"footer-actions"},[n("button",{on:{click:function(t){return t.stopPropagation(),e.cancle(t)}}},[e._v("取消")]),n("button",{on:{click:function(t){return t.stopPropagation(),e.confirm(t)}}},[e._v("确定")])])])])},be=[];function we(e){n("ZNEq")}var xe=!1,ke=we,Ae="data-v-620238cf",Ee=null,Ce=Object(x["a"])(ge,ye,be,xe,ke,Ae,Ee),Pe=Ce.exports,Ie={install:function(e){var t=e.extend({render:function(e){var t=this;return e(Pe,{on:{input:function(e){t.value=e},"update:show":function(e){return t.show=e},"on-confirm":t.onConfirm},props:{show:t.show,value:t.value}})},data:function(){return{show:!1,value:"",onConfirm:function(){}}},componetms:{Textarea:Pe}}),n=new t({el:document.createElement("div")});document.body.appendChild(n.$el),e.prototype.$textarea=function(e){Object.assign(n,{show:!0,value:"",onConfirm:function(){}},e)},window._Vue=e}};a["a"].config.productionTip=!1,Object.keys(D).forEach(function(e){a["a"].filter(e,D[e])}),Object.keys(G).forEach(function(e){a["a"].directive(e,G[e])}),a["a"].component("app-view",K),a["a"].component("icon-button",ae),a["a"].use(ve),a["a"].use(Ie),new a["a"](o()({router:Y,store:s["a"]},T)).$mount("#app")},PS7y:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,'.page-content{position:relative;height:100%;z-index:1}.page-content.scroll{overflow:auto;-webkit-overflow-scrolling:touch}.page-content.hidden{overflow:hidden}.page-shadow-effect{position:absolute;top:0;bottom:0;right:100%;width:16px;z-index:-1;content:"";background:-webkit-gradient(linear,left top,right top,from(transparent),color-stop(10%,transparent),color-stop(50%,rgba(0,0,0,.01)),to(rgba(0,0,0,.2)));background:linear-gradient(90deg,transparent 0,transparent 10%,rgba(0,0,0,.01) 50%,rgba(0,0,0,.2))}',""])},QmSG:function(e,t,n){e.exports={isDev:!1,isProduction:!0,assetsDomain:"https://o818xvhxo.qnssl.com"}},VpHb:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,".modal-mask[data-v-6be3f571]{position:fixed;z-index:9998;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:table;-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.modal-wrapper[data-v-6be3f571]{display:table-cell;vertical-align:middle}.modal-container[data-v-6be3f571]{width:70%;max-width:500px;margin:0 auto;padding:20px 30px;background-color:#fff;border-radius:2px;-webkit-box-shadow:0 .125rem .5rem rgba(0,0,0,.33);box-shadow:0 2px 8px rgba(0,0,0,.33);-webkit-transition:all .3s ease;transition:all .3s ease}.modal-header h3[data-v-6be3f571]{margin-top:0;color:#42b983}.modal-body[data-v-6be3f571]{margin:20px 0;line-height:24px}.modal-footer[data-v-6be3f571]{padding-bottom:34px}.modal-default-button[data-v-6be3f571]{float:right;margin-left:.9375rem}.modal-enter[data-v-6be3f571],.modal-leave-active[data-v-6be3f571]{opacity:0}.modal-enter .modal-container[data-v-6be3f571],.modal-leave-active .modal-container[data-v-6be3f571]{-webkit-transform:scale(1.1);transform:scale(1.1)}",""])},ZNEq:function(e,t,n){var i=n("gEkU");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("rjj0").default;o("55c50b9e",i,!0,{shadowMode:!1,sourceMap:!1})},gEkU:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,".textarea-input[data-v-620238cf]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:5;background:#282c34}.textarea[data-v-620238cf]{width:18.75rem;height:12.5rem;background:transparent;color:#fff;border:none;padding:0;font-size:1.125rem;text-align:center;resize:none}.footer-actions[data-v-620238cf]{position:absolute;left:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;height:3.125rem;line-height:3.125rem}.footer-actions button[data-v-620238cf]{display:block;width:4.375rem;height:100%;font-size:1rem;color:#fff;background:transparent;border:none;padding:0}",""])},iClD:function(e,t){},kG3Q:function(e,t,n){var i=n("kr3J");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("rjj0").default;o("5cb3aad0",i,!0,{shadowMode:!1,sourceMap:!1})},kr3J:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,'a,abbr,address,article,aside,audio,b,big,blockquote,body,caption,center,cite,code,dd,del,details,dfn,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,label,legend,li,mark,menu,nav,ol,output,p,pre,q,ruby,s,samp,section,small,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,u,ul,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}a{text-decoration:none}a,button,div,input,select,textarea{-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent!important;outline:none}html{font-size:16px;font-family:sans-serif;-webkit-text-size-adjust:100%}a,img,label{-webkit-tap-highlight-color:rgba(255,255,255,0)}input:focus{outline:0}@media screen and (min-width:414px) and (max-width:767px){html{font-size:16.96px}}@media screen and (min-width:768px){html{font-size:20px}}.blue{color:#7cdbd5}.blue-bg{background-color:#7cdbd5}.dark-blue{color:#02c8a7}.dark-blue-bg{background-color:#02c8a7}.gray{color:#ccc}.gray-bg{background-color:#ccc}.yellow{color:#f9be02}.yellow-bg{background-color:#f9be02}.red{color:#f53240}.red-bg{background-color:#f53240}[class*=f-bd]{position:relative}[class*=f-bd]:after{position:absolute;z-index:2;content:"";top:0;left:0;pointer-events:none;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;-webkit-transform-origin:top left;transform-origin:top left;border:0 solid #ccc}.f-bd-top:after{border-top-width:1px}.f-bd-btm:after{border-bottom-width:1px}.f-bd-tb:after{border-width:1px 0}.f-bd-left:after{border-left-width:1px}.f-bd-right:after{border-right-width:1px}.f-bd-lr:after{border-width:0 1px}.f-bd-full:after{border-width:1px}@media screen and (-webkit-min-device-pixel-ratio:1.5){[class*=f-bd]:after{width:150%;height:150%;-webkit-transform:scale(.666666);transform:scale(.666666)}}@media screen and (-webkit-min-device-pixel-ratio:2){[class*=f-bd]:after{width:200%;height:200%;-webkit-transform:scale(.5);transform:scale(.5)}}@media screen and (-webkit-min-device-pixel-ratio:3){[class*=f-bd]:after{width:300%;height:300%;-webkit-transform:scale(.333333);transform:scale(.333333)}}[class*=btn-]{display:inline-block;font-weight:400;padding:.3125rem .625rem;font-size:.875rem;background-color:transparent;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;border-radius:.125rem;border:1px solid transparent;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box}[class*=btn-]:active{-webkit-transform:scale(.9) translateZ(0);transform:scale(.9) translateZ(0)}.btn-info{color:#fff;background-color:#7cdbd5;border-color:#7cdbd5}.btn-outline-info{color:#7cdbd5;background-color:transparent;background-image:none;border-color:#7cdbd5}.btn-white{color:#000;background-color:#fff;border-color:#fff}.btn-outline-white{color:#fff;background-color:transparent;background-image:none;border-color:#fff}.btn-block{display:block;width:100%}.btn-small{padding:.1875rem .5rem;font-size:.75rem}.btn-large{padding:.5rem 1rem;font-size:1.125rem;line-height:1.5;border-radius:.1875rem}.display-block{display:block}.display-none{display:none}.item-center{display:-webkit-box;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@font-face{font-family:iconfont;src:url("/assets/font/iconfont.eot?t=1525327185527");src:url("/assets/font/iconfont.eot?t=1525327185527#iefix") format("embedded-opentype"),url("data:application/x-font-woff;charset=utf-8;base64,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") format("woff"),url("/assets/font/iconfont.ttf?t=1525327185527") format("truetype"),url("/assets/font/iconfont.svg?t=1525327185527#iconfont") format("svg")}.iconfont{font-family:iconfont!important;font-size:1rem;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-play:before{content:"\\34AD"}.icon-new:before{content:"\\E61D"}.icon-delete:before{content:"\\E648"}.icon-pencil:before{content:"\\EB89"}.icon-point:before{content:"\\E6A3"}.icon-pause:before{content:"\\E7D2"}.icon-help:before{content:"\\E616"}.icon-ico-correct:before{content:"\\E61E"}.icon-close:before{content:"\\E656"}.icon-upload:before{content:"\\E674"}.icon-color:before{content:"\\E601"}.icon-pa_checked01:before{content:"\\E66C"}.icon-Zoom:before{content:"\\E615"}.icon-eraser:before{content:"\\E71C"}.icon-upload1:before{content:"\\E64E"}.icon-download:before{content:"\\E64F"}.icon-next:before{content:"\\E654"}.icon-previous:before{content:"\\E655"}.icon-undo:before{content:"\\E65A"}.icon-redo:before{content:"\\E65B"}.icon-ico-typelayer-ZIpQl:before{content:"\\E675"}.icon-masaike:before{content:"\\E611"}body,html{overflow-x:hidden}#app,body,html{height:100%;width:100%}#app{position:relative}.page-view{position:absolute;left:0;top:0;width:100%;height:100%;background-color:#fff}.page-in-enter-active,.page-in-leave-active,.page-out-enter-active,.page-out-leave-active{will-change:transform;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;perspective:1000}.page-out-leave,.page-out-leave-to{z-index:2}.page-in-enter-to,.page-in-leave,.page-out-enter-to,.page-out-leave{-webkit-transform:translateZ(0);transform:translateZ(0)}.page-in-enter,.page-out-leave-to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.page-in-leave-to,.page-out-enter{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0)}.page-in-leave-active.page-opacity-effect,.page-out-enter-active.page-opacity-effect{position:absolute;left:0;top:0;bottom:0;width:100%;background:rgba(0,0,0,.1);z-index:10000}.page-in-leave.page-opacity-effect{opacity:0}.page-in-leave-to.page-opacity-effect{opacity:1;-webkit-transition:opacity .4s;transition:opacity .4s}.page-out-enter.page-opacity-effect{opacity:1}.page-out-enter-to.page-opacity-effect{opacity:0;-webkit-transition:opacity .4s;transition:opacity .4s}.fade-enter-active,.fade-leave-active{-webkit-transition:opacity .5s;transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0}',""])},lYqf:function(e,t,n){"use strict";var i={};n.d(i,"Text",function(){return S}),n.d(i,"Line",function(){return F}),n.d(i,"Gather",function(){return M}),n.d(i,"Border",function(){return U});var o={};n.d(o,"Add",function(){return G}),n.d(o,"Delete",function(){return R});var a={};n.d(a,"Add",function(){return H}),n.d(a,"Delete",function(){return Q}),n.d(a,"Modify",function(){return Z}),n.d(a,"SwitchFrmae",function(){return W});n("n12u"),n("EuXz");var r=n("Z60a"),s=n.n(r),l=n("C9uT"),c=n.n(l),u=n("eJS1"),d=n.n(u),f=n("T/v0"),h=n.n(f),p=n("j/rp"),m=n.n(p),v=n("/epL"),g=(n("TFWu"),function(){function e(t){s()(this,e),this.data=t,this.len=this.data.length,this.pos=0}return c()(e,[{key:"readByte",value:function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return this.data instanceof Uint8Array?this.data[this.pos++]:255&this.data.charCodeAt(this.pos++)}},{key:"readBytes",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t}},{key:"read",value:function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t}},{key:"readUnsigned",value:function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}}]),e}());function y(e){return e.reduce(function(e,t){return 2*e+t},0)}function b(e){for(var t=[],n=7;n>=0;n--)t.push(!!(e&1<<n));return t}function w(e,t){var n,i,o=0,a=function(e){for(var n=0,i=0;i<e;i++)t.charCodeAt(o>>3)&1<<(7&o)&&(n|=1<<i),o++;return n},r=[],s=1<<e,l=s+1,c=e+1,u=[],d=function(){u=[],c=e+1;for(var t=0;t<s;t++)u[t]=[t];u[s]=[],u[l]=null},f=!0;while(f)if(i=n,n=a(c),n!==s){if(n===l)break;if(n<u.length)i!==s&&u.push(u[i].concat(u[n][0]));else{if(n!==u.length)throw new Error("Invalid LZW code.");u.push(u[i].concat(u[i][0]))}r.push.apply(r,u[n]),u.length===1<<c&&c<12&&c++}else d();return r}function x(e,t){for(var n=new Array(e.length),i=e.length/t,o=function(i,o){var a=e.slice(o*t,(o+1)*t);n.splice.apply(n,[i*t,t].concat(a))},a=[0,4,2,1],r=[8,8,4,2],s=0,l=0;l<4;l++)for(var c=a[l];c<i;c+=r[l])o(c,s),s++;return n}function k(e,t,n){var i=new window.FileReader;i.onload=function(e){t(e.target.result)},i.onerror=n||function(){},i.readAsArrayBuffer(e)}var A=function(e){function t(){var e;return s()(this,t),e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.stream=null,e}return m()(t,e),c()(t,[{key:"reset",value:function(){this.stream=null}},{key:"load",value:function(e,t){var n=this;return window.FileReader&&(e instanceof window.Blob||e instanceof window.File)?"image/gif"!==e.type?void n.emit("parseError"):void k(e,function(i){var o=new Uint8Array(i),a=e.size;n.emit("loadProgress",a,a),n.loadEnd(o,t)},function(e){n.emit("loadError",e)}):(n.req=new window.XMLHttpRequest,n.req.open("GET",e,!0),"overrideMimeType"in n.req?n.req.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in n.req?n.req.responseType="arraybuffer":n.req.setRequestHeader("Accept-Charset","x-user-defined"),n.req.onload=function(){200!==this.status&&n.emit("loadError",{status:this.status}),"response"in this||(this.response=new window.VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var e=this.response;e.toString().indexOf("ArrayBuffer")>0&&(e=new Uint8Array(e)),n.loadEnd(e,t)},n.req.onprogress=function(e){e.lengthComputable&&n.emit("loadProgress",e.loaded,e.total)},n.req.onerror=function(e){n.emit("loadError",e),n.req=null},n.req.send(),n)}},{key:"loadAbort",value:function(){this.req&&(this.req.abort(),this.req=null,this.emit("loadAbort"))}},{key:"loadEnd",value:function(e,t){var n=this;n.stream=new g(e),setTimeout(function(){t&&t(),n.emit("loaded"),n.req=null,n.parse()},0)}},{key:"parse",value:function(){var e=this;try{this.parseHeader(),setTimeout(function(){e.parseBlock()},0)}catch(e){this.emit("parseError",e)}}},{key:"parseCT",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.stream.readBytes(3));return t}},{key:"readSubBlocks",value:function(){var e,t;t="";do{e=this.stream.readByte(),t+=this.stream.read(e)}while(0!==e);return t}},{key:"parseHeader",value:function(){var e={};if(e.sig=this.stream.read(3),e.ver=this.stream.read(3),"GIF"!==e.sig)throw new Error("Not a GIF file.");e.width=this.stream.readUnsigned(),e.height=this.stream.readUnsigned();var t=b(this.stream.readByte());e.gctFlag=t.shift(),e.colorRes=y(t.splice(0,3)),e.sorted=t.shift(),e.gctSize=y(t.splice(0,3)),e.bgColor=this.stream.readByte(),e.pixelAspectRatio=this.stream.readByte(),e.gctFlag&&(e.gct=this.parseCT(1<<e.gctSize+1)),this.setParseStatus("parseHeader",e)}},{key:"parseImg",value:function(e){e.leftPos=this.stream.readUnsigned(),e.topPos=this.stream.readUnsigned(),e.width=this.stream.readUnsigned(),e.height=this.stream.readUnsigned();var t=b(this.stream.readByte());e.lctFlag=t.shift(),e.interlaced=t.shift(),e.sorted=t.shift(),e.reserved=t.splice(0,2),e.lctSize=y(t.splice(0,3)),e.lctFlag&&(e.lct=this.parseCT(1<<e.lctSize+1)),e.lzwMinCodeSize=this.stream.readByte();var n=this.readSubBlocks();e.pixels=w(e.lzwMinCodeSize,n),e.interlaced&&(e.pixels=x(e.pixels,e.width)),this.setParseStatus("parseImg",e)}},{key:"parseBlock",value:function(){var e=this,t={};switch(t.sentinel=e.stream.readByte(),String.fromCharCode(t.sentinel)){case"!":t.type="ext",e.parseExt(t);break;case",":t.type="img",e.parseImg(t);break;case";":t.type="eof",e.emit("parseEnd",t);break;default:throw new Error("Unknown block: 0x"+t.sentinel.toString(16))}"eof"!==t.type&&setTimeout(function(){e.parseBlock()},0)}},{key:"parseExt",value:function(e){switch(e.label=this.stream.readByte(),e.label){case 249:e.extType="gce",this.parseGCExt(e);break;case 254:e.extType="com",this.parseComExt(e);break;case 1:e.extType="pte",this.parsePTExt(e);break;case 255:e.extType="app",this.parseAppExt(e);break;default:e.extType="unknown",this.parseUnknownExt(e);break}}},{key:"parseGCExt",value:function(e){this.stream.readByte();var t=b(this.stream.readByte());e.reserved=t.splice(0,3),e.disposalMethod=y(t.splice(0,3)),e.userInput=t.shift(),e.transparencyGiven=t.shift(),e.delayTime=this.stream.readUnsigned(),e.transparencyIndex=this.stream.readByte(),e.terminator=this.stream.readByte(),this.setParseStatus("parseGCExt",e)}},{key:"parseComExt",value:function(e){e.comment=this.readSubBlocks(),this.setParseStatus("parseComExt",e)}},{key:"parsePTExt",value:function(e){this.stream.readByte(),e.ptHeader=this.stream.readBytes(12),e.ptData=this.readSubBlocks(),this.setParseStatus("parsePTExt",e)}},{key:"parseAppExt",value:function(e){var t=this,n=function(e){t.stream.readByte(),e.unknown=t.stream.readByte(),e.iterations=t.stream.readUnsigned(),e.terminator=t.stream.readByte(),t.setParseStatus("parseAppExt",e)},i=function(e){e.appData=t.readSubBlocks(),t.setParseStatus("parseUnknownAppExt",e)};switch(t.stream.readByte(),e.identifier=t.stream.read(8),e.authCode=t.stream.read(3),e.identifier){case"NETSCAPE":n(e);break;default:i(e);break}}},{key:"parseUnknownExt",value:function(e){e.data=this.readSubBlocks(),this.setParseStatus("parseUnknownExt",e)}},{key:"setParseStatus",value:function(e,t){this.emit(e,t),this.emit("parseProgress",e,this.stream.pos,this.stream.data.length)}}]),t}(v["a"]),E=function(e){function t(){var e;return s()(this,t),e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.frames=[],e.frame=null,e.frameOffsets=[],e.lastImg=null,e.disposalRestoreFromIdx=null,e.transparency=null,e.delay=null,e.lastDisposalMethod=null,e.disposalMethod=null,e.timer=null,e.frameIndex=-1,e.parser=new A,e}return m()(t,e),c()(t,[{key:"init",value:function(){var e=this;return e.create(),["parseHeader","parseImg","parseGCExt","parseEnd"].forEach(function(t){e.parser.on(t,function(n){e[t](n)})}),e}},{key:"load",value:function(e){return this.pause(),this.reset(),this.parser.load(e),this}},{key:"create",value:function(){var e=this;e.canvas=document.createElement("canvas"),e.ctx=e.canvas.getContext("2d"),e.tmpCanvas=document.createElement("canvas"),e.tmpCtx=e.tmpCanvas.getContext("2d")}},{key:"render",value:function(e){e.appendChild(this.canvas)}},{key:"destory",value:function(e){e.removeChild(this.canvas)}},{key:"setFrameOffset",value:function(e,t){this.frameOffsets[e]?("undefined"!==typeof t.x&&(this.frameOffsets[e].x=t.x),"undefined"!==typeof t.y&&(this.frameOffsets[e].y=t.y)):this.frameOffsets[e]=t}},{key:"pushFrame",value:function(){this.frame&&(this.frames.push({data:this.frame.getImageData(0,0,this.header.width,this.header.height),delay:this.delay}),this.frameOffsets.push({x:0,y:0}))}},{key:"clear",value:function(){this.transparency=null,this.delay=null,this.lastDisposalMethod=this.disposalMethod,this.disposalMethod=null,this.frame=null,this.lastImg=null}},{key:"reset",value:function(){this.clear(),this.frames.length=0,this.frameOffsets.length=0,this.frameIndex=-1,this.parser.reset(),this.ctx.clearRect(0,0,this.tmpCanvas.width,this.tmpCanvas.height),this.tmpCtx.clearRect(0,0,this.tmpCanvas.width,this.tmpCanvas.height)}},{key:"setFrameIndex",value:function(e){this.frameIndex=e,this.emit("frameIndex",e)}},{key:"parseHeader",value:function(e){var t=this;t.canvas.width=t.tmpCanvas.width=e.width,t.canvas.height=t.tmpCanvas.height=e.height,t.header=e}},{key:"parseImg",value:function(e){var t=this;this.frame||(this.frame=this.tmpCanvas.getContext("2d"));var n=this.frames.length,i=e.lctFlag?e.lct:this.header.gct;n>0&&(3===this.lastDisposalMethod?null!==this.disposalRestoreFromIdx?this.frame.putImageData(this.frames[this.disposalRestoreFromIdx].data,0,0):this.frame.clearRect(this.lastImg.leftPos,this.lastImg.topPos,this.lastImg.width,this.lastImg.height):this.disposalRestoreFromIdx=n-1,2===this.lastDisposalMethod&&this.lastImg&&this.frame.clearRect(this.lastImg.leftPos,this.lastImg.topPos,this.lastImg.width,this.lastImg.height));var o=this.frame.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach(function(e,n){e!==t.transparency&&(o.data[4*n+0]=i[e][0],o.data[4*n+1]=i[e][1],o.data[4*n+2]=i[e][2],o.data[4*n+3]=255)}),this.frame.putImageData(o,e.leftPos,e.topPos),this.lastImg=e}},{key:"parseGCExt",value:function(e){this.pushFrame(),this.clear(),this.transparency=e.transparencyGiven?e.transparencyIndex:null,this.delay=e.delayTime,this.disposalMethod=e.disposalMethod}},{key:"parseEnd",value:function(){this.pushFrame(),this.clear(),this.header=null,this.parser.reset()}},{key:"drawFrame",value:function(e){var t=this.frameOffsets[e];this.tmpCtx.putImageData(this.frames[e].data,t.x,t.y),this.ctx.clearRect(0,0,this.tmpCanvas.width,this.tmpCanvas.height),this.ctx.drawImage(this.tmpCanvas,0,0)}},{key:"jump",value:function(e,t){this.pause();var n=this.frames.length-1;"absolute"!==t&&(e+=this.frameIndex),e>n?e=n:e<0&&(e=0),this.setFrameIndex(e),this.drawFrame(e)}},{key:"play",value:function(e){var t=this;e=!1!==e,this.pause();var n=this.frames.length-1,i=this.frameIndex;if(this.frameIndex>=n){if(!e)return void this.pause();i=-1}var o=i+1,a=10*this.frames[o].delay;this.timer=setTimeout(function(){t.drawFrame(o),t.emit("play",o),t.setFrameIndex(o),t.play(e)},a||100)}},{key:"pause",value:function(){clearTimeout(this.timer)}}]),t}(v["a"]),C=n("Oy1H"),P=n.n(C),I=n("BnCw"),T=n.n(I),B=n("M1I4"),j=n.n(B),O=n("vs94"),z=function(e){function t(){var e;return s()(this,t),e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.stack=[],e.index=0,e.disableUndo=!0,e.disableRedo=!0,e}return m()(t,e),c()(t,[{key:"push",value:function(e){var t=e.action,n=e.info,i=void 0===n?{}:n;this.stack[this.index++]={action:t,info:i},this.stack.length=this.index,this.input()}},{key:"undo",value:function(){var e;this.index>0&&((e=this.stack[--this.index].action).undo.apply(e,arguments),this.input())}},{key:"redo",value:function(){var e;this.index<this.stack.length&&((e=this.stack[this.index++].action).redo.apply(e,arguments),this.input())}},{key:"input",value:function(){this.disableUndo=this.index<=0,this.disableRedo=this.index>=this.stack.length,this.emit("input",this)}},{key:"each",value:function(e,t){t="undefined"!==typeof t?t:this.index;for(var n=0;n<t;n++)e(this.stack[n],n)}},{key:"reset",value:function(){this.stack.length=0,this.index=0,this.disableUndo=!0,this.disableRedo=!0,this.input()}}]),t}(v["a"]),S=(n("mJx5"),function(){function e(t){s()(this,e),Object.assign(this,e.defaultProps,t),this.setSize()}return c()(e,[{key:"draw",value:function(e){return e.save(),e.translate(this.x,this.y),e.font=this.font,e.fillStyle=this.fillStyle,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.fillText(this.text,0,0),e.restore(),this}},{key:"setSize",value:function(){this.width=e.getTextWidth(this.text,this.font),this.height=this.getFontSize()}},{key:"getFontSize",value:function(){return parseInt(this.font.split(" ")[0])}},{key:"setFontSize",value:function(e){var t=this.font.split(" ");t[0]=e+"px",this.font=t.join(" ")}},{key:"setProps",value:function(e){"number"===typeof e.height&&e.height!==this.height&&this.setFontSize(e.height),Object.assign(this,e)}},{key:"getProps",value:function(){return Object.assign({},this)}}],[{key:"getTextWidth",value:function(e,t){var n=document.createElement("canvas"),i=n.getContext("2d");i.font=t,i.fillText(e,0,0);var o=i.measureText(e).width;return i=null,n=null,o}}]),e}());Object.defineProperty(S,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{TYPE:"text",MOVE:!0,x:0,y:0,font:"26px SimHei bold",fillStyle:"#000",textAlign:"start",textBaseline:"hanging"}});var F=function(){function e(t){s()(this,e),Object.assign(this,e.defaultProps,t)}return c()(e,[{key:"moveTo",value:function(e,t,n){this.points=[],this.setStyle(e),e.beginPath(),e.moveTo(t,n),this.pushPoint(t,n)}},{key:"lineTo",value:function(e,t,n){e.lineTo(t,n),e.stroke(),this.pushPoint(t,n)}},{key:"pushPoint",value:function(e,t){this.points.push(e),this.points.push(t)}},{key:"eachPoint",value:function(e){var t=this.points.length,n=2;while(n<t)e(this.points[n],this.points[n+1]),n+=2}},{key:"setStyle",value:function(e){e.strokeStyle=this.strokeStyle,e.lineWidth=this.lineWidth,e.lineJoin=e.lineCap="round"}},{key:"setProps",value:function(e){Object.assign(this,e)}},{key:"getProps",value:function(){return Object.assign({},this)}},{key:"draw",value:function(e){this.points.length>1&&(e.save(),this.setStyle(e),e.beginPath(),e.moveTo(this.points[0],this.points[1]),this.eachPoint(function(t,n){e.lineTo(t,n)}),e.stroke(),e.restore())}}]),e}();Object.defineProperty(F,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{TYPE:"line",strokeStyle:"#000",lineWidth:2}});var M=function(){function e(t){s()(this,e),Object.assign(this,t),this.TYPE="gather"}return c()(e,[{key:"draw",value:function(e){for(var t=this.elements.length,n=0;n<t;n++)this.elements[n].draw(e)}},{key:"setProps",value:function(e){Object.assign(this,e)}},{key:"getProps",value:function(){return Object.assign({},this)}}]),e}(),U=function(){function e(){s()(this,e);var t=this;t.padding=10,t.ratio=1,t.offsetLeft=0,t.offsetTop=0,t.zoom=new O["a"]}return c()(e,[{key:"render",value:function(e){this.create(),this.bindEvent(),e.appendChild(this.el)}},{key:"create",value:function(){var t=document.createElement("div");t.innerHTML=e.template,this.el=t.querySelector("div:first-child")}},{key:"bindEvent",value:function(){var e=this.el.querySelector(".zoom");this.zoom.bind(e)}},{key:"draw",value:function(e){var t=this;t.styles={width:e.width*t.ratio+2*t.padding,height:e.height*t.ratio+2*t.padding,left:e.x*t.ratio-t.padding+t.offsetLeft,top:e.y*t.ratio-t.padding+t.offsetTop},e.ID&&(t.targetId=e.ID),t.setStyle()}},{key:"show",value:function(){this.el.style.display="block"}},{key:"hide",value:function(){this.el.style.display="none"}},{key:"setStyle",value:function(){var e="display: block;";for(var t in this.styles)this.styles.hasOwnProperty(t)&&(e+="".concat(t,":").concat(this.styles[t],"px;"));this.el.style.cssText=e}},{key:"setOffset",value:function(e){var t=e.getBoundingClientRect();this.ratio=t.width/e.width,this.offsetLeft=t.left,this.offsetTop=t.top}}]),e}();Object.defineProperty(U,"template",{configurable:!0,enumerable:!0,writable:!0,value:'<div class="editor-action-border"><button class="icon-btn zoom"><i class="iconfont icon-Zoom"></i></button></div>'});var Y=n("6fgr"),D=function(){function e(t){s()(this,e),this.id=t.ID,this.type=t.TYPE,this.props=t.getProps()}return c()(e,[{key:"add",value:function(e){var t=e.elementController.addElement(new(i[Object(Y["e"])(this.type)])(this.props),this.id);t.draw(e.editCtx)}},{key:"delete",value:function(e){e.elementController.removeElement(this.id),e.redrawEditCanvas()}}]),e}(),G=function(e){function t(e){return s()(this,t),h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return m()(t,e),c()(t,[{key:"undo",value:function(e){this.delete(e)}},{key:"redo",value:function(e){this.add(e)}}]),t}(D),R=function(e){function t(e){return s()(this,t),h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return m()(t,e),c()(t,[{key:"undo",value:function(e){this.add(e)}},{key:"redo",value:function(e){this.delete(e)}}]),t}(D),q=function(){function e(){s()(this,e),this.elements={},this.count=0,this.zindex=[]}return c()(e,[{key:"getElement",value:function(e){return this.elements[e]}},{key:"getElements",value:function(){var e=[];return this.eachElements(function(t){e.push(t)}),e}},{key:"addElement",value:function(e,t){return t=t||++this.count,e.ID=t,this.elements[t]=e,this.zindex.push(t),e}},{key:"removeElement",value:function(e){var t=this.elements[e];t&&(delete this.elements[e],this.zindex.splice(this.zindex.indexOf(e),1))}},{key:"eachElements",value:function(e){for(var t=this.zindex.length,n=0;n<t;n++){var i=this.zindex[n];if(e(this.elements[i],i))break}}},{key:"hasElements",value:function(){return!!this.zindex.length}},{key:"reset",value:function(){this.elements={},this.count=0,this.zindex.length=0}}]),e}(),L=function(e){function t(){var e;s()(this,t),e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var n=j()(e);return n.canvas=null,n.mainCtx=null,n.width=null,n.height=null,n.handler=new O["a"]({each:function(e){n.elementController.eachElements(function(t){e(t,t.ID)})}}),n.border=new U,n.history=new z,n.elementController=new q,n.tools={},n.currentElement=null,n.currentAction=null,e}return m()(t,e),c()(t,[{key:"init",value:function(){var e=this;return e.create(),e.addEventHandler(),e}},{key:"create",value:function(){var e=this;e.canvas=document.createElement("canvas"),e.canvas.className="editor-main",e.mainCtx=e.canvas.getContext("2d"),e.tempCanvas=document.createElement("canvas"),e.tempCanvas.className="editor-temp",e.tempCtx=e.tempCanvas.getContext("2d"),e.editCanvas=document.createElement("canvas"),e.editCanvas.className="editor-edit",e.editCanvas.style.pointerEvents="auto",e.editCtx=e.editCanvas.getContext("2d")}},{key:"render",value:function(e){e.appendChild(this.canvas),e.appendChild(this.editCanvas),e.appendChild(this.tempCanvas),this.border.render(e)}},{key:"destory",value:function(e){e.removeChild(this.canvas)}},{key:"reset",value:function(){this.clearCanvas("main"),this.clearCanvas("temp"),this.clearCanvas("edit"),this.history.reset(),this.elementController.reset(),T()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"setSize",value:function(e,t){var n=this;n.width=n.canvas.width=n.tempCanvas.width=n.editCanvas.width=e,n.height=n.canvas.height=n.tempCanvas.height=n.editCanvas.height=t,this.border.setOffset(this.canvas),this.handler.setRatio()}},{key:"selectElement",value:function(e){var t=this;t.currentElement="object"===P()(e)?e:t.getElement(e),t.border.draw(t.currentElement)}},{key:"unselectElement",value:function(){var e=this;e.currentElement=null,e.border.hide()}},{key:"redraw",value:function(){var e=this;e.mainCtx.clearRect(0,0,e.width,e.height),e.eachElements(function(t){e.isValidElement(t)&&t.draw(e.mainCtx)})}},{key:"redrawEditCanvas",value:function(){var e=this;e.editCtx.clearRect(0,0,e.width,e.height),e.elementController.eachElements(function(t){t.draw(e.editCtx)})}},{key:"saveEdits",value:function(e){e=Object.assign({$type:"global"},e);var t=this.elementController.getElements(),n=null;return n=t.length>1?this.addElement(new M({elements:t})):this.addElement(t[0]),e.$type||(e.$frameIndex=this._getFrameIndex()),n.setProps(e),n.draw(this.mainCtx),n}},{key:"isValidElement",value:function(e){var t=this._getFrameIndex();return e&&(e.$frameIndex===t||"global"===e.$type)}},{key:"clearCanvas",value:function(e){this["".concat(e,"Ctx")].clearRect(0,0,this.width,this.height)}},{key:"resetEditCanvas",value:function(){this.elementController.reset(),this.history.reset(),this.clearCanvas("edit")}},{key:"record",value:function(e,t,n){e=Object(Y["e"])(e),o[e]&&this.history.push({action:new o[e](t,n)})}},{key:"addEventHandler",value:function(){var e=this;function t(){var t,n;(t=e.tools.move.handler).onpointerdown.apply(t,arguments),e.currentAction&&(n=e.tools[e.currentAction].handler).onpointerdown.apply(n,arguments)}function n(){var t,n;(t=e.tools.move.handler).onpointermove.apply(t,arguments),e.currentAction&&(n=e.tools[e.currentAction].handler).onpointermove.apply(n,arguments)}function i(){var t,n;e.currentAction&&(t=e.tools[e.currentAction].handler).onpointerup.apply(t,arguments),(n=e.tools.move.handler).onpointerup.apply(n,arguments)}function o(t){e.currentAction=t}e.border.zoom.on("onpointerdown",e.tools.zoom.handler.onpointerdown),e.border.zoom.on("onpointermove",e.tools.zoom.handler.onpointermove),e.handler.bind(e.editCanvas).on("onpointerdown",t).on("onpointermove",n).on("onpointerup",i).on("onaction",o)}}]),t}(q),N=function(){function e(t){s()(this,e),this.id=t.ID,this.type=t.TYPE,this.props=t.getProps()}return c()(e,[{key:"add",value:function(e){var t=e.addElement(new(i[Object(Y["e"])(this.type)])(this.props),this.id);t.draw(e.mainCtx)}},{key:"delete",value:function(e){e.removeElement(this.id),e.redraw()}}]),e}(),H=function(e){function t(e){return s()(this,t),h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return m()(t,e),c()(t,[{key:"undo",value:function(e){this.delete(e.layer)}},{key:"redo",value:function(e){this.add(e.layer)}}]),t}(N),Q=function(e){function t(e){return s()(this,t),h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return m()(t,e),c()(t,[{key:"undo",value:function(e){this.add(e.layer)}},{key:"redo",value:function(e){this.delete(e.layer)}}]),t}(N),Z=function(){function e(t,n){s()(this,e),this.id=t.ID,this.newProps=t.getProps(),this.prevProps=n}return c()(e,[{key:"undo",value:function(e){var t=e.layer.getElement(this.id);t.setProps(this.prevProps),e.layer.redraw()}},{key:"redo",value:function(e){var t=e.layer.getElement(this.id);t.setProps(this.newProps),e.layer.redraw()}}]),e}(),W=function(){function e(t,n){s()(this,e),this.originIndex=t,this.newIndex=n}return c()(e,[{key:"undo",value:function(e){e.gif.jump(this.originIndex,"absolute")}},{key:"redo",value:function(e){e.gif.jump(this.newIndex,"absolute")}}]),e}(),J=n("QmSG"),K=function(){function e(t){var n=this;s()(this,e),this.el=t.el,this.gif=new E,this.layer=new L,this.layer._getFrameIndex=function(){return n.gif.frameIndex},this.history=new z}return c()(e,[{key:"init",value:function(){var e=this;return e.layer.init(),e.gif.init(),e.gif.on("frameIndex",e.layer.redraw.bind(e.layer)),e.gif.parser.once("parseEnd",e.render.bind(e)),e.gif.parser.on("parseEnd",function(){e.layer.setSize(e.gif.canvas.width,e.gif.canvas.height)}),e}},{key:"render",value:function(){this.el=document.querySelector(this.el),this.gif.render(this.el),this.layer.render(this.el)}},{key:"destory",value:function(){this.gif.pause(),this.gif.destory(this.el),this.layer.destory(this.el)}},{key:"createGif",value:function(){var e=this,t=e.gif.frames.length,n=document.createElement("canvas"),i=n.getContext("2d"),o={workers:2,quality:10};J["isProduction"]&&(o.workerScript="https://gif.webfed.cn/gif.worker.js"),e.builder||(e.builder=new d.a(o),e.builder.on("finished",function(t){e.gif.emit("finished",URL.createObjectURL(t)),e.builder.frames.length=0,e.builder.imageParts.length=0,e.builder.options.width=null,e.builder.options.height=null,e.builder.abort(),n=null,i=null}),e.builder.on("progress",function(t){e.gif.emit("progress",t)}));for(var a=n.width=e.gif.canvas.width,r=n.height=e.gif.canvas.height,s=function(t){i.clearRect(0,0,a,r),i.putImageData(e.gif.frames[t].data,0,0),e.layer.eachElements(function(e){"global"!==e.$type&&e.$frameIndex!==t||e.draw(i)});var n=i.getImageData(0,0,a,r);e.builder.addFrame(n,{delay:e.gif.frames[t].delay?10*e.gif.frames[t].delay:100})},l=0;l<t;l++)s(l);e.builder.render()}},{key:"reset",value:function(){this.gif.reset(),this.layer.reset(),this.history.reset()}},{key:"addTool",value:function(e,t){if(!this.layer.tools[e]){var n={controller:{},handler:{}};return Object.assign(n,t(this)),n.handler=Object.assign({onpointerdown:Y["g"],onpointermove:Y["g"],onpointerup:Y["g"]},n.handler),this.layer.tools[e]=n,this}}},{key:"useTool",value:function(e){if(this.layer.tools[e])return this.changeAction(e),this.layer.tools[e].controller}},{key:"changeAction",value:function(e){this.layer.handler.emit("onaction",e)}},{key:"addRecord",value:function(e){var t=e.action,n=e.info,i=this.history.stack.length;if(n||(n={frameIndex:this.gif.frameIndex}),i){var o=this.history.stack[i-1].info.frameIndex;o!==n.frameIndex&&this.history.push({action:new W(o,n.frameIndex)})}this.history.push({action:t,info:n})}},{key:"record",value:function(e,t,n){if(e=Object(Y["e"])(e),a[e]){var i={action:new a[e](t,n)};"undefined"!==typeof t.$frameIndex&&(i.info={frameIndex:t.$frameIndex}),this.addRecord(i)}}}]),e}(),X=function(e){var t=e.layer,n=function(e){return e.currentElement&&e.currentElement.MOVE},i={onpointerdown:function(e){var n=e.id;if(n&&t.currentAction){var i=t.elementController.getElement(n);i.MOVE&&t.selectElement(i)}},onpointermove:function(e){var i=e.x,o=e.y;n(t)&&(t.currentElement.x+=i,t.currentElement.y+=o,t.clearCanvas("temp"),t.currentElement.draw(t.tempCtx),t.border.draw(t.currentElement))},onpointerup:function(e,i){n(t)&&(i||e||t.unselectElement())}};return{handler:i}},V=function(e){var t=e.layer,n=null,i={onpointerdown:function(){n=t.currentElement.width/t.currentElement.height},onpointermove:function(e){var i=e.x,o=e.y,a=(i+o)/2*1.5,r=10,s=t.currentElement.width+a,l=t.currentElement.height+a/n;(s<=r||l<=r)&&(s=t.currentElement.width,l=t.currentElement.height),t.currentElement.setProps({width:s,height:l}),t.clearCanvas("temp"),t.currentElement.draw(t.tempCtx),t.border.draw(t.currentElement)}};return{handler:i}},_=function(e){var t=e.layer,n=null;function i(){setTimeout(function(){n=null,e.changeAction(null),t.resetEditCanvas(),t.unselectElement(),t.clearCanvas("temp")})}var o={add:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=t.elementController.addElement(new S(e)),e.x=n.x=(t.width-n.width)/2,e.y=n.y=(t.height-n.height)/2,t.selectElement(n),t.clearCanvas("temp"),n.draw(t.tempCtx)},restore:function(){i()},modify:function(e){var i=n.text;n.setProps(e),e.text&&e.text!==i&&(n.setSize(),t.selectElement(n)),t.clearCanvas("temp"),n.draw(t.tempCtx)},save:function(n){var o=t.saveEdits(n);e.record("add",o),i()},getCurrentElement:function(){return n}};return{controller:o}},$=function(e){var t=e.layer,n=null,i={};function o(){setTimeout(function(){i={},n=null,e.changeAction(null),t.resetEditCanvas()})}var a={modify:function(e){Object.assign(i,e)},save:function(n){if(t.elementController.hasElements()){var i=t.saveEdits(n);e.record("add",i)}o()},restore:function(){o()}},r={onpointerdown:function(e){var o=e.x,a=e.y;n=new F(i),n.moveTo(t.tempCtx,~~o,~~a)},onpointermove:function(e){var i=e.move;t.clearCanvas("temp"),n.lineTo(t.tempCtx,~~i.x,~~i.y)},onpointerup:function(e){e||n.lineTo(t.tempCtx,n.points[0]+.1,n.points[1]+.1),t.clearCanvas("temp"),t.record("add",t.elementController.addElement(n)),n.draw(t.editCtx)}};return{controller:a,handler:r}},ee=new K({el:".editor-canvas-container"}).addTool("move",X).addTool("zoom",V).addTool("text",_).addTool("pencil",$);t["a"]=ee},vs94:function(e,t,n){"use strict";var i=n("Biqn"),o=n.n(i),a=(n("EuXz"),n("Z60a")),r=n.n(a),s=n("C9uT"),l=n.n(s),c=n("T/v0"),u=n.n(c),d=n("j/rp"),f=n.n(d),h=n("M1I4"),p=n.n(h),m=n("6fgr"),v=m["f"]?"touchstart":"mousedown",g=m["f"]?"touchmove":"mousemove",y=m["f"]?"touchend":"mouseup",b=n("/epL");n.d(t,"a",function(){return w});var w=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r()(this,t),e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var i=p()(e);return i.each=n.each||m["g"],i.last={},i.elementId=null,i.isMoving=!1,i.touchDelay=3,["pointdown","pointmove","pointup"].forEach(function(e){i[e]=i[e].bind(i)}),e}return f()(t,e),l()(t,[{key:"bind",value:function(e){var t=this;return t.el=e,t.setRatio(),Object(m["a"])(t.el,v,t.pointdown,{passive:!1}),t}},{key:"setRatio",value:function(){var e=this;e.rect=e.el.getBoundingClientRect(),e.ratio="CANVAS"===e.el.tagName?e.el.width/e.rect.width:1}},{key:"pointdown",value:function(e){e.preventDefault();var t=this,n=e.touches;n?2===n.length?t.pinchstart(n):1===n.length&&t.dragstart(n[0]):t.dragstart(e),Object(m["a"])(document,g,t.pointmove,{passive:!1}),Object(m["a"])(document,y,t.pointup)}},{key:"pointmove",value:function(e){e.preventDefault();var t=this,n=e.touches;n?2===n.length?t.pinchmove(n):1===n.length&&t.dragmove(n[0]):t.dragmove(e)}},{key:"pointup",value:function(){var e=this;Object(m["h"])(document,g,e.pointmove),Object(m["h"])(document,y,e.pointup),e.emit("onpointerup",e.isMoving,e.elementId),e.elementId=null,e.isMoving=!1}},{key:"dragstart",value:function(e){var t=this;t.last.move={x:(e.clientX-t.rect.left)*t.ratio,y:(e.clientY-t.rect.top)*t.ratio},t.touchDelay=3,t.each(function(e,n){Object(m["d"])(e,t.last.move.x,t.last.move.y)&&(t.elementId=n)}),t.emit("onpointerdown",o()({},t.last.move,{id:t.elementId}))}},{key:"dragmove",value:function(e){var t=this,n={x:(e.clientX-t.rect.left)*t.ratio,y:(e.clientY-t.rect.top)*t.ratio},i=n.x-t.last.move.x,o=n.y-t.last.move.y;t.last.move=n,t.touchDelay?t.touchDelay--:(t.isMoving=!0,t.emit("onpointermove",{move:n,x:i,y:o,id:t.elementId}))}},{key:"pinchstart",value:function(){}},{key:"pinchmove",value:function(){}}]),t}(b["a"])}},[0]);
//# sourceMappingURL=app.90ee8478.js.map