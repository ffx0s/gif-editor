{"version":3,"sources":["webpack:///./src/plugins/eventEmitter.js","webpack:///./src/utils/shared.js","webpack:///./src/components/IconButton/index.vue?bdfb","webpack:///./src/components/IconButton/index.vue?ac0f","webpack:///./src/components/Modal/index.vue?8649","webpack:///./src/store/modules/page.js","webpack:///./src/store/modules/edit.js","webpack:///./src/store/index.js","webpack:///./src/components/View/index.vue?16de","webpack:///./src/views lazy ^\\.\\/.*$","webpack:///./src/utils/page.js","webpack:///src/App.vue","webpack:///./src/App.vue?9f24","webpack:///./src/App.vue","webpack:///./src/events.js","webpack:///./src/router/index.js","webpack:///src/components/View/index.vue","webpack:///./src/components/View/index.vue?4e8b","webpack:///./src/components/View/index.vue","webpack:///src/components/IconButton/index.vue","webpack:///./src/components/IconButton/index.vue?e959","webpack:///./src/components/IconButton/index.vue","webpack:///src/components/Modal/index.vue","webpack:///./src/components/Modal/index.vue?32a4","webpack:///./src/components/Modal/index.vue","webpack:///./src/components/Modal/plugin.js","webpack:///src/components/Textarea/index.vue","webpack:///./src/components/Textarea/index.vue?c856","webpack:///./src/components/Textarea/index.vue","webpack:///./src/components/Textarea/plugin.js","webpack:///./src/main.js","webpack:///./src/components/View/index.vue?dbe3","webpack:///./src/config.js","webpack:///./src/components/Modal/index.vue?17b7","webpack:///./src/components/Textarea/index.vue?4fae","webpack:///./src/components/Textarea/index.vue?6561","webpack:///./src/App.vue?37d4","webpack:///./src/App.vue?9fb0","webpack:///./src/editor/cores/gif/stream.js","webpack:///./src/editor/cores/gif/utils.js","webpack:///./src/editor/cores/gif/parser.js","webpack:///./src/editor/cores/gif/index.js","webpack:///./src/editor/cores/history.js","webpack:///./src/editor/elements/text.js","webpack:///./src/editor/elements/line.js","webpack:///./src/editor/elements/gather.js","webpack:///./src/editor/elements/border.js","webpack:///./src/editor/cores/editActions.js","webpack:///./src/editor/elements/controller.js","webpack:///./src/editor/cores/layer.js","webpack:///./src/editor/cores/mainActions.js","webpack:///./src/editor/index.js","webpack:///./src/editor/tools/move.js","webpack:///./src/editor/tools/zoom.js","webpack:///./src/editor/tools/text.js","webpack:///./src/editor/tools/pencil.js","webpack:///./src/editor/instance.js","webpack:///./src/utils/constants.js","webpack:///./src/plugins/handler.js"],"names":["slice","Array","prototype","EventEmitter","__WEBPACK_IMPORTED_MODULE_2__Users_vx_test_gif_editor_node_modules_babel_runtime_helpers_classCallCheck___default","this","events","eventName","fn","once","that","split","forEach","name","push","on","args","call","arguments","length","i","current","apply","splice","browser","elem","document","createElement","isSupport","getContext","toDataURL","indexOf","u","navigator","userAgent","chrome","trident","webkit","gecko","mobile","match","mac","ios","android","iPhone","iPad","weixin","noop","isSupportTouch","viewHeight","documentElement","clientHeight","viewWidth","timer","addListener","window","clearTimeout","setTimeout","clientWidth","supportsPassive","opts","Object","defineProperty","get","addEventListener","removeEventListener","e","element","type","options","__WEBPACK_IMPORTED_MODULE_0__Users_vx_test_gif_editor_node_modules_babel_runtime_helpers_objectSpread___default","capture","passive","removeListener","isNumber","value","Infinity","isNaN","containsPoint","rect","x","y","width","height","firstToUpperCase","text","charAt","toUpperCase","colorToRGB","color","alpha","parseInt","undefined","r","g","b","a","concat","exports","module","__webpack_require__","content","locals","add","default","shadowMode","sourceMap","page_state","direction","historyPage","mutations","updateDirection","state","data","saveScrollTop","_ref","path","scrollTop","hash","getters","page","edit_state","file","loadProgress","parseProgress","status","frameIndex","frameLength","pause","disableUndo","disableRedo","currentAction","edit_mutations","progress","index","undoRedostatus","_ref2","_ref3","slicedToArray_default","actions","load","_ref4","commit","instance","gif","play","_ref5","_ref6","reset","_ref7","edit_getters","edit","polyfill","vue_runtime_esm","use","vuex_esm","__webpack_exports__","Store","modules","strict","config","map","./Editor","./Editor/","./Editor/index","./Editor/index.vue","./Editor/modules/Canvas","./Editor/modules/Canvas.vue","./Editor/modules/Download","./Editor/modules/Download.vue","./Editor/modules/PencilTool","./Editor/modules/PencilTool.vue","./Editor/modules/PlayController","./Editor/modules/PlayController.vue","./Editor/modules/TextTool","./Editor/modules/TextTool.vue","./Editor/modules/ToolLayout","./Editor/modules/ToolLayout.vue","./Editor/modules/Tools","./Editor/modules/Tools.vue","./Gallery","./Gallery/","./Gallery/index","./Gallery/index.vue","./Home","./Home/","./Home/images/bg.jpg","./Home/index","./Home/index.vue","./PageNotFound","./PageNotFound/","./PageNotFound/index","./PageNotFound/index.vue","webpackAsyncContext","req","ids","Promise","all","then","reject","Error","keys","id","loading","el","getElementById","getStatus","curStatus","className","nextStatus","show","background","replace","fixedWXScroll","scrollEl","targetSelector","shared","offset","startY","targetEl","touches","pageY","querySelector","pullDownAction","pullUpAction","Math","floor","scrollHeight","preventDefault","fixedSwipeBack","back","go","pointX","changedTouches","clientX","disabledScale","lastTouchEnd","now","Date","getScrollEl","vm","$el","scrollTo","top","_scrollTo","to","store","fullPath","offsetTop","_saveScrollTop","from","_isForward","ALWAYS_BACK_PAGE","ALWAYS_FORWARD_PAGE","HISTORY_STACK","App","computed","objectSpread_default","App_render","_vm","_h","$createElement","_c","_self","attrs","transitionName","$route","meta","staticClass","_e","keepAlive","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","component_normalizer","src_App","eventEmitter","pageStatus","src_events","loadRoute","vue_router_esm","routes","title","component","redirect","router","linkActiveClass","beforeEach","next","emit","afterEach","mixin","beforeRouteEnter","beforeRouteLeave","src_router","View","Boolean","View_render","class","scroll","_t","View_staticRenderFns","View_injectStyle","View___vue_template_functional__","View___vue_styles__","View___vue_scopeId__","View___vue_module_identifier__","View_Component","components_View","IconButton","String","_this","IconButton_render","active","isActive","click","onClick","touchend","$event","stopPropagation","iconClass","IconButton_staticRenderFns","IconButton_injectStyle","IconButton___vue_template_functional__","IconButton___vue_styles__","IconButton___vue_scopeId__","IconButton___vue_module_identifier__","IconButton_Component","components_IconButton","Modal","Modal_render","touchmove","directives","rawName","expression","$emit","_v","Modal_staticRenderFns","Modal_injectStyle","Modal___vue_template_functional__","Modal___vue_styles__","Modal___vue_scopeId__","Modal___vue_module_identifier__","Modal_Component","components_Modal","Modal_plugin","install","Vue","_Modal","extend","render","cancel","confirm","props","showCancelButton","showConfirmButton","slot","domProps","innerHTML","body","componetms","appendChild","$alert","assign","$confirm","Textarea","Textarea_render","placeholder","autofocus","input","updateValue","target","cancle","Textarea_staticRenderFns","Textarea_injectStyle","Textarea___vue_template_functional__","Textarea___vue_styles__","Textarea___vue_scopeId__","Textarea___vue_module_identifier__","Textarea_Component","components_Textarea","Textarea_plugin","_Textarea","update:show","on-confirm","onConfirm","$textarea","_Vue","productionTip","filters","key","filter","directive","$mount","isDev","isProduction","assetsDomain","stream_Stream","Stream","classCallCheck_default","len","pos","Uint8Array","charCodeAt","n","bytes","readByte","s","fromCharCode","readBytes","bitsToNum","ba","reduce","byteToBitArr","bite","lzwDecode","minCodeSize","code","last","readCode","size","output","clearCode","eoiCode","codeSize","dict","clear","flag","deinterlace","pixels","newPixels","rows","cpRow","toRow","fromRow","fromPixels","offsets","steps","pass","fileToArrayBuffer","callback","errorCallback","fileReader","FileReader","onload","result","onerror","readAsArrayBuffer","parser_Parser","Parser","possibleConstructorReturn_default","__proto__","getPrototypeOf","stream","src","Blob","File","arrayBuffer","loadEnd","error","XMLHttpRequest","open","overrideMimeType","responseType","setRequestHeader","response","VBArray","responseText","toArray","join","toString","onprogress","lengthComputable","loaded","total","send","abort","parse","_this2","parseHeader","parseBlock","entries","ct","read","hdr","sig","ver","readUnsigned","bits","gctFlag","shift","colorRes","sorted","gctSize","bgColor","pixelAspectRatio","gct","parseCT","setParseStatus","img","leftPos","topPos","lctFlag","interlaced","reserved","lctSize","lct","lzwMinCodeSize","lzwData","readSubBlocks","block","sentinel","parseExt","parseImg","label","extType","parseGCExt","parseComExt","parsePTExt","parseAppExt","parseUnknownExt","disposalMethod","userInput","transparencyGiven","delayTime","transparencyIndex","terminator","comment","ptHeader","ptData","parseNetscapeExt","unknown","iterations","parseUnknownAppExt","appData","identifier","authCode","gif_Gif","Gif","frames","frame","frameOffsets","lastImg","disposalRestoreFromIdx","transparency","delay","lastDisposalMethod","parser","create","url","canvas","ctx","tmpCanvas","tmpCtx","removeChild","getImageData","header","clearRect","currIdx","putImageData","imgData","pixel","gce","pushFrame","drawImage","position","endIndex","setFrameIndex","drawFrame","loop","_this3","currentIndex","history_History","History","stack","action","_ref$info","info","_stack$action","undo","_stack$action2","redo","text_Text","Text","defaultProps","setSize","createClass_default","save","translate","font","fillStyle","textAlign","textBaseline","fillText","restore","getTextWidth","getFontSize","items","setFontSize","measureText","TYPE","MOVE","line_Line","Line","points","setStyle","beginPath","moveTo","pushPoint","lineTo","stroke","strokeStyle","lineWidth","lineJoin","lineCap","eachPoint","gather_Gather","Gather","elements","draw","border_Border","Border","padding","ratio","offsetLeft","zoom","plugins_handler","container","bindEvent","div","template","point","bind","styles","left","ID","targetId","style","display","prop","hasOwnProperty","cssText","getBoundingClientRect","editActions_BaseAction","BaseAction","getProps","layer","elementController","addElement","elements_namespaceObject","editCtx","removeElement","redrawEditCanvas","editActions_Add","_BaseAction","Add","inherits_default","delete","editActions_Delete","_BaseAction2","Delete","controller_ElementController","ElementController","count","zindex","eachElements","layer_Layer","Layer","assertThisInitialized_default","mainCtx","handler","each","border","history","tools","currentElement","addEventHandler","tempCanvas","tempCtx","editCanvas","pointerEvents","clearCanvas","get_default","setOffset","setRatio","typeof_default","getElement","hide","isValidElement","$type","getElements","$frameIndex","_getFrameIndex","setProps","prevProps","editActions_namespaceObject","onpointerdown","_that$tools$move$hand","_that$tools$that$curr","move","onpointermove","_that$tools$move$hand2","_that$tools$that$curr2","onpointerup","_that$tools$that$curr3","_that$tools$move$hand3","onaction","mainActions_BaseAction","redraw","mainActions_Add","editor","mainActions_Delete","mainActions_Modify","Modify","newProps","mainActions_SwitchFrmae","SwitchFrmae","originIndex","newIndex","jump","editor_Editor","Editor","init","destory","framesLength","workers","quality","workerScript","builder","gif_default","blob","URL","createObjectURL","imageParts","_loop","imageData","addFrame","toolFn","tool","controller","changeAction","lastIndex","mainActions_namespaceObject","record","addRecord","isMoveElement","selectElement","moved","unselectElement","scale","min","tools_text","resetEditCanvas","modify","prevText","saveEdits","getCurrentElement","pencil","line","lineProps","hasElements","instance_editor","addTool","POINTER_DOWN","POINTER_MOVE","POINTER_UP","handler_Handler","Handler","elementId","isMoving","touchDelay","pointdown","tagName","pinchstart","dragstart","pointmove","pointup","pinchmove","dragmove","clientY"],"mappings":"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","file":"js/app.42f2f16c.js","sourcesContent":["const slice = Array.prototype.slice\n\nexport default class EventEmitter {\n  constructor() {\n    this.events = {}\n  }\n\n  on(eventName, fn, once) {\n    const that = this\n\n    eventName.split(' ').forEach(name => {\n      if (!that.events[name]) {\n        that.events[name] = []\n      }\n      fn && that.events[name].push({ fn, once })\n    })\n    return that\n  }\n\n  once(eventName, fn) {\n    return this.on(eventName, fn, true)\n  }\n\n  emit(eventName) {\n    const that = this\n    const args = slice.call(arguments, 1)\n\n    eventName.split(' ').forEach(name => {\n      const events = that.events[name]\n\n      if (events) {\n        const length = events.length\n\n        for (let i = 0; i < length; i++) {\n          const current = events[i]\n\n          if (current) {\n            events[i].fn.apply(that, args)\n\n            if (events[i].once) {\n              events.splice(i--, 1)\n            }\n          }\n        }\n      }\n    })\n  }\n\n  off(eventName, fn) {\n    const that = this\n    const events = that.events[eventName]\n\n    if (events) {\n      // 没有回调函数则移除所有该事件下的函数\n      if (!fn) {\n        that.events[eventName] = []\n        return\n      }\n\n      // 有事件名和函数\n      const length = events.length\n\n      for (let i = 0; i < length; i++) {\n        if (events[i] && events[i].fn === fn) {\n          events.splice(i, 1)\n          break\n        }\n      }\n      return\n    }\n\n    // 没有事件名则移除所有监听函数\n    if (!eventName) {\n      that.events = {}\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/eventEmitter.js","// 是否支持 webp 格式\nexport const isSupportWebp = (function isSupportWebp() {\n  let elem = document.createElement('canvas')\n  const isSupport =\n    elem.getContext && elem.getContext('2d')\n      ? elem.toDataURL('image/webp').indexOf('data:image/webp') === 0\n      : false\n  elem = null\n\n  return isSupport\n})()\n\nexport const browser = (function browser() {\n  const u = navigator.userAgent\n\n  return {\n    // Chrome\n    chrome: u.indexOf('Chrome') > -1 && u.indexOf('Edge') === -1,\n    // IE\n    trident: u.indexOf('Trident') > -1,\n    // webkit 内核(Chrome , Safari)\n    webkit: u.indexOf('AppleWebKit') > -1,\n    // 火狐\n    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') === -1,\n    // 是否为移动终端\n    mobile: !!u.match(/AppleWebKit.*Mobile.*/),\n    // 是否为mac\n    mac: u.indexOf('Mac') > -1,\n    // ios终端\n    ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),\n    // android终端或者uc浏览器\n    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1,\n    // 是否为iPhone\n    iPhone: u.indexOf('iPhone') > -1,\n    iPad: u.indexOf('iPad') > -1,\n    weixin: u.indexOf('MicroMessenger') > -1\n  }\n})()\n\nexport function serialize(data) {\n  return Object.keys(data)\n    .map(keyName => {\n      return keyName + '=' + data[keyName]\n    })\n    .join('&')\n}\n\nexport function sleep(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms)\n  })\n}\n\nexport function noop() {}\n\nexport const isSupportTouch = 'ontouchend' in document ? true : false\n\nexport let viewHeight = document.documentElement.clientHeight\n\nexport let viewWidth = (function _viewWidth() {\n  let timer = null\n\n  addListener(window, 'resize', () => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      viewWidth = document.documentElement.clientWidth\n      viewHeight = document.documentElement.clientHeight\n    }, 300)\n  })\n\n  return document.documentElement.clientWidth\n})()\n\n// 是否支持 passive 属性\nexport let supportsPassive = false\n\ntry {\n  const opts = Object.defineProperty({}, 'passive', {\n    get: function() {\n      supportsPassive = true\n    }\n  })\n  window.addEventListener('testPassive', null, opts)\n  window.removeEventListener('testPassive', null, opts)\n} catch (e) {\n  throw ''\n}\n\nexport function addListener(element, type, fn, options) {\n  element.addEventListener(\n    type,\n    fn,\n    supportsPassive\n      ? {\n          capture: false,\n          passive: true,\n          once: false,\n          ...options\n        }\n      : !!options\n  )\n}\n\nexport function removeListener(element, type, fn, options) {\n  element.removeEventListener(type, fn, options)\n}\n\nexport function endcodeJsonStringify(data) {\n  return encodeURIComponent(JSON.stringify(data))\n}\n\nexport function toFixed(value, digits) {\n  return +value.toFixed(digits)\n}\n\n/**\n * 是否为数字\n * @param {*} value 值\n */\nexport function isNumber(value) {\n  return typeof value === 'number' && value !== Infinity && !isNaN(value)\n}\n\n/**\n * 判断对象是否在坐标范围内\n * @param {*} rect 检测对象\n * @param {*} x x坐标\n * @param {*} y y坐标\n */\nexport function containsPoint(rect, x, y) {\n  if (\n    rect &&\n    isNumber(rect.x) &&\n    isNumber(rect.y) &&\n    isNumber(rect.width) &&\n    isNumber(rect.height) &&\n    isNumber(x) &&\n    isNumber(y)\n  ) {\n    return !(\n      x < rect.x ||\n      x > rect.x + rect.width ||\n      y < rect.y ||\n      y > rect.y + rect.height\n    )\n  }\n  return false\n}\n\n/**\n * 首字母大写\n * @param {String} text 单词\n */\nexport function firstToUpperCase(text) {\n  return text.charAt(0).toUpperCase() + text.slice(1)\n}\n\n/**\n * Converts a color to the RGB string format: 'rgb(r,g,b)' or 'rgba(r,g,b,a)'\n * @param {number|string} color\n * @param {number}        alpha\n * @return {string}\n */\nexport function colorToRGB(color, alpha) {\n  // number in octal format or string prefixed with #\n  if (typeof color === 'string' && color[0] === '#') {\n    color = window.parseInt(color.slice(1), 16)\n  }\n  alpha = alpha === undefined ? 1 : alpha\n  // parse hex values\n  let r = (color >> 16) & 0xff\n  let g = (color >> 8) & 0xff\n  let b = color & 0xff\n  let a = alpha < 0 ? 0 : alpha > 1 ? 1 : alpha\n  // only use 'rgba' if needed\n  if (a === 1) {\n    return `rgb(${r}, ${g}, ${b})`\n  } else {\n    return `rgba(${r}, ${g}, ${b}, ${a})`\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/shared.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".icon-btn[data-v-0fb4713d]{width:2.1875rem;height:2.1875rem;padding:0;cursor:pointer;color:#fff;border:none;background:transparent}.icon-btn i[data-v-0fb4713d]{display:inline-block}.icon-btn[data-v-0fb4713d]:disabled{opacity:.5;cursor:default}.icon-btn.active i[data-v-0fb4713d]{-webkit-animation-name:icon-animate-data-v-0fb4713d;animation-name:icon-animate-data-v-0fb4713d;-webkit-animation-duration:.4s;animation-duration:.4s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:1;animation-iteration-count:1}@-webkit-keyframes icon-animate-data-v-0fb4713d{50%{opacity:.3;-webkit-transform:scale(1.6) translateZ(0);transform:scale(1.6) translateZ(0)}}@keyframes icon-animate-data-v-0fb4713d{50%{opacity:.3;-webkit-transform:scale(1.6) translateZ(0);transform:scale(1.6) translateZ(0)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"id\":\"data-v-0fb4713d\",\"scoped\":true,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/IconButton/index.vue\n// module id = FR/Q\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fb4713d\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5b91461c\", content, true, {\"shadowMode\":false,\"sourceMap\":false});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader?{\"shadowMode\":false,\"sourceMap\":false}!./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"id\":\"data-v-0fb4713d\",\"scoped\":true,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/IconButton/index.vue\n// module id = Fmek\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6be3f571\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"378fd27c\", content, true, {\"shadowMode\":false,\"sourceMap\":false});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader?{\"shadowMode\":false,\"sourceMap\":false}!./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"id\":\"data-v-6be3f571\",\"scoped\":true,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Modal/index.vue\n// module id = H6T0\n// module chunks = 13","/**\n * 页面\n */\n\nconst state = {\n  // 页面切换方向\n  direction: 'forward',\n  // 页面滚动条坐标信息\n  historyPage: {}\n}\n\nconst mutations = {\n  updateDirection(state, data) {\n    state.direction = data.direction\n  },\n  saveScrollTop(state, { path, scrollTop, hash }) {\n    if (!state.historyPage[path]) {\n      state.historyPage[path] = {}\n    }\n    state.historyPage[path].scrollTop = scrollTop\n    state.historyPage[path].hash = hash\n  }\n}\n\nconst getters = {\n  direction: state => state.direction,\n  historyPage: state => state.historyPage\n}\n\nexport default {\n  state,\n  mutations,\n  getters\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/page.js","import editor from '@/editor/instance'\n\n/**\n * 编辑器\n */\n\nconst state = {\n  // 上传文件\n  file: null,\n  // 加载进度\n  loadProgress: 0,\n  // 解析进度\n  parseProgress: 0,\n  // 编辑状态：\n  // 0 待上传\n  // 1 已上传\n  // 2 加载和解析中\n  // 3 加载出错\n  // 4 解析出错\n  // 5 编辑中\n  // 6 生成图片中\n  // 7 生成图片完成\n  status: 0,\n  // 当前帧\n  frameIndex: 0,\n  // 总帧数\n  frameLength: 0,\n  // 是否为暂停状态\n  pause: true,\n  // 禁用撤销操作\n  disableUndo: true,\n  // 禁用还原操作\n  disableRedo: true,\n  // 当前操作（文字工具/铅笔工具/...）\n  currentAction: ''\n}\n\nconst mutations = {\n  file(state, file) {\n    state.file = file\n    if (file) {\n      state.status = 1\n    }\n  },\n  progress(state, { name, value }) {\n    state[`${name}Progress`] = value\n  },\n  status(state, value) {\n    state.status = value\n  },\n  frameIndex(state, index) {\n    state.frameIndex = index\n  },\n  frameLength(state, frameLength) {\n    state.frameLength = frameLength\n  },\n  pause(state, pause) {\n    state.pause = pause\n  },\n  undoRedostatus(state, [disableUndo, disableRedo]) {\n    state.disableUndo = disableUndo\n    state.disableRedo = disableRedo\n  },\n  currentAction(state, currentAction) {\n    state.currentAction = currentAction\n  }\n}\n\nconst actions = {\n  load({ commit, state }) {\n    if (state.file) {\n      commit('file', state.file)\n      commit('status', 2)\n      editor.gif.load(state.file)\n      // editor.gif.load('https://freshdesign.io/img/inspiration/woveC.gif')\n      // editor.gif.load(\n      //   'https://media.giphy.com/media/3o7aCZVImHIHQmPLy0/giphy.gif'\n      // )\n      // 小图\n      // editor.gif.load(\n      //   'https://o818xvhxo.qnssl.com/o_1cbc7bdanf1g1lg916uop4q1gt19.gif'\n      // )\n      // editor.gif.load(\n      //   'https://o818xvhxo.qnssl.com/o_1cc04ds1psg7t0e19kj6ci4qa9.gif'\n      // )\n      commit('file', null)\n    }\n  },\n  play({ commit }) {\n    editor.gif.play()\n    commit('pause', false)\n  },\n  pause({ commit }) {\n    editor.gif.pause()\n    commit('pause', true)\n  },\n  reset({ commit }) {\n    editor.reset()\n    setTimeout(() => {\n      commit('status', 0)\n    })\n  }\n}\n\nconst getters = {\n  loadProgress: state => state.loadProgress,\n  parseProgress: state => state.parseProgress,\n  status: state => state.status,\n  frameIndex: state => state.frameIndex,\n  frameLength: state => state.frameLength,\n  pause: state => state.pause,\n  disableUndo: state => state.disableUndo,\n  disableRedo: state => state.disableRedo,\n  currentAction: state => state.currentAction\n}\n\nexport default {\n  state,\n  mutations,\n  actions,\n  getters\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/edit.js","/* eslint-env node */\nrequire('es6-promise').polyfill() // Fixed Android 4.1\n\nimport Vue from 'vue'\nimport Vuex from 'vuex'\n// import createLogger from 'vuex/dist/logger'\nimport { isDev } from '@/config'\n\nimport page from './modules/page'\nimport edit from './modules/edit'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  modules: {\n    page,\n    edit\n  },\n  strict: isDev\n  // plugins: isDev ? [createLogger()] : []\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1c1a3cbe\", content, true, {\"shadowMode\":false,\"sourceMap\":false});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader?{\"shadowMode\":false,\"sourceMap\":false}!./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"scoped\":false,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/View/index.vue\n// module id = MTz1\n// module chunks = 13","var map = {\n\t\"./Editor\": [\n\t\t\"pBS4\",\n\t\t1,\n\t\t0\n\t],\n\t\"./Editor/\": [\n\t\t\"pBS4\",\n\t\t1,\n\t\t0\n\t],\n\t\"./Editor/index\": [\n\t\t\"pBS4\",\n\t\t1,\n\t\t0\n\t],\n\t\"./Editor/index.vue\": [\n\t\t\"pBS4\",\n\t\t1,\n\t\t0\n\t],\n\t\"./Editor/modules/Canvas\": [\n\t\t\"N0bn\",\n\t\t0,\n\t\t7\n\t],\n\t\"./Editor/modules/Canvas.vue\": [\n\t\t\"N0bn\",\n\t\t0,\n\t\t7\n\t],\n\t\"./Editor/modules/Download\": [\n\t\t\"lbb4\",\n\t\t0,\n\t\t9\n\t],\n\t\"./Editor/modules/Download.vue\": [\n\t\t\"lbb4\",\n\t\t0,\n\t\t9\n\t],\n\t\"./Editor/modules/PencilTool\": [\n\t\t\"89Hp\",\n\t\t0,\n\t\t10\n\t],\n\t\"./Editor/modules/PencilTool.vue\": [\n\t\t\"89Hp\",\n\t\t0,\n\t\t10\n\t],\n\t\"./Editor/modules/PlayController\": [\n\t\t\"MLDf\",\n\t\t0,\n\t\t5\n\t],\n\t\"./Editor/modules/PlayController.vue\": [\n\t\t\"MLDf\",\n\t\t0,\n\t\t5\n\t],\n\t\"./Editor/modules/TextTool\": [\n\t\t\"2deL\",\n\t\t0,\n\t\t8\n\t],\n\t\"./Editor/modules/TextTool.vue\": [\n\t\t\"2deL\",\n\t\t0,\n\t\t8\n\t],\n\t\"./Editor/modules/ToolLayout\": [\n\t\t\"QXMH\",\n\t\t0\n\t],\n\t\"./Editor/modules/ToolLayout.vue\": [\n\t\t\"QXMH\",\n\t\t0\n\t],\n\t\"./Editor/modules/Tools\": [\n\t\t\"sJLE\",\n\t\t6\n\t],\n\t\"./Editor/modules/Tools.vue\": [\n\t\t\"sJLE\",\n\t\t6\n\t],\n\t\"./Gallery\": [\n\t\t\"fvYi\",\n\t\t4\n\t],\n\t\"./Gallery/\": [\n\t\t\"fvYi\",\n\t\t4\n\t],\n\t\"./Gallery/index\": [\n\t\t\"fvYi\",\n\t\t4\n\t],\n\t\"./Gallery/index.vue\": [\n\t\t\"fvYi\",\n\t\t4\n\t],\n\t\"./Home\": [\n\t\t\"esL9\",\n\t\t0,\n\t\t2\n\t],\n\t\"./Home/\": [\n\t\t\"esL9\",\n\t\t0,\n\t\t2\n\t],\n\t\"./Home/images/bg.jpg\": [\n\t\t\"jLhC\",\n\t\t11\n\t],\n\t\"./Home/index\": [\n\t\t\"esL9\",\n\t\t0,\n\t\t2\n\t],\n\t\"./Home/index.vue\": [\n\t\t\"esL9\",\n\t\t0,\n\t\t2\n\t],\n\t\"./PageNotFound\": [\n\t\t\"ZzKa\",\n\t\t3\n\t],\n\t\"./PageNotFound/\": [\n\t\t\"ZzKa\",\n\t\t3\n\t],\n\t\"./PageNotFound/index\": [\n\t\t\"ZzKa\",\n\t\t3\n\t],\n\t\"./PageNotFound/index.vue\": [\n\t\t\"ZzKa\",\n\t\t3\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"MWF8\";\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views lazy ^\\.\\/.*$\n// module id = MWF8\n// module chunks = 13","import store from '@/store'\nimport { browser, viewWidth, viewHeight, addListener } from '@/utils/shared'\n\nexport const loading = (function loadingWrap() {\n  const el = document.getElementById('loading')\n\n  function getStatus(value) {\n    return value ? 'show' : 'hide'\n  }\n\n  return function loadingInner(options) {\n    const curStatus = getStatus(el.className.indexOf('hide') === -1)\n    const nextStatus = getStatus(options.show)\n    const background = options.show && options.background ? 'background' : ''\n\n    // 如果 loading 当前处于显示状态则不处理\n    if (curStatus === 'show' && nextStatus === 'show' && !options.replace)\n      return\n\n    el.className = `loading ${background} ${nextStatus}`\n  }\n})()\n\n// 解决微信上下滑出现黑底背景问题\nexport function fixedWXScroll(scrollEl, targetSelector) {\n  if (!browser.weixin) return\n\n  const offset = 5\n  let startY = 0\n  let targetEl = null\n\n  addListener(scrollEl, 'touchstart', e => {\n    startY = e.touches[0].pageY\n    targetEl = scrollEl.querySelector(targetSelector)\n  })\n\n  addListener(\n    scrollEl,\n    'touchmove',\n    e => {\n      const y = startY - e.touches[0].pageY\n      const pullDownAction = y < -offset\n      const pullUpAction = y > offset\n\n      if (!targetEl) return\n\n      if (\n        (pullDownAction && targetEl.scrollTop <= 0) ||\n        (pullUpAction &&\n          Math.floor(targetEl.scrollHeight - viewHeight) <= targetEl.scrollTop)\n      ) {\n        e.preventDefault()\n      }\n    },\n    { passive: false }\n  )\n}\n\n// 解决单页过场动画 IOS 侧滑问题\nexport function fixedSwipeBack(status) {\n  status.back = false\n  status.go = true\n  status.reset = () => {\n    status.back = false\n    status.go = false\n  }\n\n  let pointX = 0\n\n  addListener(document, 'touchstart', e => {\n    pointX = e.changedTouches[0].clientX\n    status.reset()\n  })\n\n  addListener(document, 'touchmove', () => {\n    const value = viewWidth / 2\n\n    status.go = pointX > value\n    status.back = pointX < value\n  })\n\n  return status\n}\n\n// 禁止移动端双击缩放\nexport function disabledScale() {\n  let lastTouchEnd = 0\n  document.addEventListener(\n    'touchend',\n    e => {\n      let now = Date.now()\n      if (now - lastTouchEnd <= 300) {\n        e.preventDefault()\n      }\n      lastTouchEnd = now\n    },\n    false\n  )\n}\n\nfunction getScrollEl(vm) {\n  return vm.$el.querySelector('.page-content')\n}\n\nexport function scrollTo(vm, top) {\n  const el = getScrollEl(vm)\n  if (el) {\n    el.scrollTop = top\n  }\n}\n\n// 进入当前页面的路由时，滚动到之前的位置\nexport function _scrollTo(vm, to) {\n  const page = store.state.page.historyPage[to.fullPath] || {}\n  let top = page.scrollTop || 0\n  // 路由带hash的优先\n  let hash = to.hash || page.hash\n\n  // 优先滚动到有hash的元素上\n  if (hash) {\n    const el = vm.$el.querySelector(hash)\n    top = el ? el.offsetTop : 0\n  }\n\n  scrollTo(vm, top)\n}\n\n// 离开当前页面的路由时，保存页面滚动位置\nexport function _saveScrollTop(vm, from) {\n  const el = getScrollEl(vm)\n\n  store.commit('saveScrollTop', {\n    path: from.fullPath,\n    scrollTop: el ? el.scrollTop : 0\n  })\n}\n\n// 判断当前路由是否是前进\nexport const _isForward = (function _isForwardWrap() {\n  // 如果在这个列表中，始终采用从左到右的滑动效果，首页比较适合用这种方式\n  const ALWAYS_BACK_PAGE = []\n\n  // to 如果在这个列表中，始终采用从右到左的滑动效果\n  const ALWAYS_FORWARD_PAGE = []\n\n  // 历史记录，记录访问过的页面的 fullPath\n  const HISTORY_STACK = []\n\n  return function _isForwarInner(to, from) {\n    // to 如果在这个列表中，始终认为是后退\n    if (to.name && ALWAYS_BACK_PAGE.indexOf(to.name) !== -1) {\n      // 清空历史\n      HISTORY_STACK.length = 0\n      return false\n    }\n\n    if (from.name && ALWAYS_BACK_PAGE.indexOf(from.name) !== -1) {\n      // 如果是从 ALWAYS_BACK_PAGE 过来的，那么永远都是前进\n      HISTORY_STACK.push(to.fullPath)\n      return true\n    }\n\n    if (to.name && ALWAYS_FORWARD_PAGE.indexOf(to.name) !== -1) {\n      // to 如果在这个列表中，始终认为是前进\n      HISTORY_STACK.push(to.fullPath)\n      return true\n    }\n\n    // 根据 fullPath 判断当前页面是否访问过，如果访问过，则属于返回\n    let index = HISTORY_STACK.indexOf(to.fullPath)\n\n    if (index !== -1) {\n      HISTORY_STACK.length = index + 1\n      return false\n    }\n\n    // 将 to.fullPath 加到栈顶\n    HISTORY_STACK.push(to.fullPath)\n\n    return true\n  }\n})()\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/page.js","<template>\n  <div id=\"app\">\n    <!-- route.meta.keepAlive 为 true 则缓存页面 -->\n    <transition\n      :name=\"transitionName\"\n    >\n      <keep-alive>\n        <router-view class=\"page-view\" v-if=\"$route.meta.keepAlive\"></router-view>\n      </keep-alive>\n    </transition>\n    <!-- route.meta.keepAlive 为 false 则不会缓存页面 -->\n    <transition\n      :name=\"transitionName\"\n    >\n      <router-view class=\"page-view\" v-if=\"!$route.meta.keepAlive\"></router-view>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { fixedWXScroll, disabledScale } from '@/utils/page'\n\nexport default {\n  name: 'App',\n  computed: {\n    ...mapGetters({\n      direction: 'direction'\n    }),\n    transitionName() {\n      return this.direction\n        ? 'page-' + (this.direction === 'forward' ? 'in' : 'out')\n        : ''\n    }\n  },\n  mounted() {\n    // 解决微信上下滑出现黑底背景问题\n    fixedWXScroll(this.$el, '.page-content')\n    // 禁止移动端双击缩放\n    disabledScale()\n  }\n}\n</script>\n\n<style lang=\"postcss\">\n@import \"./assets/css/app\";\n\n:root {\n  --duration: 400ms;\n}\n\nhtml,\nbody {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n}\n\n#app {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n.page-view {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n}\n\n.page-out-enter-active,\n.page-out-leave-active,\n.page-in-enter-active,\n.page-in-leave-active {\n  will-change: transform;\n  transition: transform var(--duration);\n  backface-visibility: hidden;\n  perspective: 1000;\n}\n\n.page-out-leave,\n.page-out-leave-to {\n  z-index: 2;\n}\n\n.page-out-leave,\n.page-out-enter-to,\n.page-in-leave,\n.page-in-enter-to {\n  transform: translate3d(0, 0, 0);\n}\n\n.page-out-leave-to,\n.page-in-enter {\n  transform: translate3d(100%, 0, 0);\n}\n\n.page-out-enter,\n.page-in-leave-to {\n  transform: translate3d(-20%, 0, 0);\n}\n\n.page-out-enter-active,\n.page-in-leave-active {\n  &.page-opacity-effect {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 100%;\n    background: rgba(0, 0, 0, 0.1);\n    z-index: 10000;\n  }\n}\n\n.page-in-leave {\n  &.page-opacity-effect {\n    opacity: 0;\n  }\n}\n\n.page-in-leave-to {\n  &.page-opacity-effect {\n    opacity: 1;\n    transition: opacity var(--duration);\n  }\n}\n\n.page-out-enter {\n  &.page-opacity-effect {\n    opacity: 1;\n  }\n}\n\n.page-out-enter-to {\n  &.page-opacity-effect {\n    opacity: 0;\n    transition: opacity var(--duration);\n  }\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[_c('keep-alive',[(_vm.$route.meta.keepAlive)?_c('router-view',{staticClass:\"page-view\"}):_vm._e()],1)],1),_c('transition',{attrs:{\"name\":_vm.transitionName}},[(!_vm.$route.meta.keepAlive)?_c('router-view',{staticClass:\"page-view\"}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18d96122\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!vue-style-loader?{\\\"shadowMode\\\":false,\\\"sourceMap\\\":false}!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18d96122\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","/**\n * 全局事件\n */\n\nimport store from '@/store'\nimport EventEmitter from '@/plugins/eventEmitter'\nimport { fixedSwipeBack, _isForward } from '@/utils/page'\n\nconst events = new EventEmitter()\nconst pageStatus = {}\n\n// 解决过场动画 IOS 侧滑问题\nfixedSwipeBack(pageStatus)\n\n// 页面切换方向控制\nevents.on('UPDATE_DIRECTION', (to, from) => {\n  store.commit('updateDirection', {\n    direction: _isForward(to, from)\n      ? pageStatus.go ? '' : 'forward'\n      : pageStatus.back ? '' : 'reverse'\n  })\n  pageStatus.reset()\n})\n\nexport default events\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport events from '@/events'\nimport { loading, _scrollTo, _saveScrollTop } from '@/utils/page'\n\nVue.use(Router)\n\nfunction loadRoute(name) {\n  return function() {\n    return import('../views/' + name)\n  }\n}\n\nconst routes = [\n  {\n    path: '/',\n    name: 'home',\n    meta: { keepAlive: true, title: '上传GIF' },\n    component: loadRoute('Home')\n  },\n  {\n    path: '/gallery',\n    name: 'gallery',\n    meta: { keepAlive: true, title: 'gallery' },\n    component: loadRoute('Gallery')\n  },\n  {\n    path: '/editor',\n    name: 'editor',\n    meta: { keepAlive: true, title: 'GIF编辑器' },\n    component: loadRoute('Editor')\n  },\n  {\n    path: '/404',\n    name: '404',\n    meta: { keepAlive: true, title: '404' },\n    component: loadRoute('PageNotFound')\n  },\n  {\n    path: '*',\n    redirect: { name: '404' }\n  }\n]\n\nconst router = new Router({\n  routes,\n  // mode: 'history',\n  linkActiveClass: 'active'\n})\n\nrouter.beforeEach((to, from, next) => {\n  loading({ show: true })\n\n  // 页面方向切换更新\n  events.emit('UPDATE_DIRECTION', to, from)\n  next()\n})\n\nrouter.afterEach(to => {\n  loading({ show: false })\n\n  // 页面统计\n  events.emit('STATS', to)\n})\n\nVue.mixin({\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      // 进入当前页面的路由时，滚动到之前的位置\n      _scrollTo(vm, to)\n    })\n  },\n  beforeRouteLeave(to, from, next) {\n    // 离开当前页面的路由时，保存页面滚动位置\n    _saveScrollTop(this, from)\n    next()\n  }\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","<template>\n<div>\n  <div class=\"page-content\" :class=\"this.scroll ? 'scroll' : 'hidden'\">\n    <slot></slot>\n  </div>\n  <div class=\"page-shadow-effect\"></div>\n  <div class=\"page-opacity-effect\"></div>\n</div>\n</template>\n\n<script>\nexport default {\n  props: {\n    scroll: {\n      type: Boolean,\n      required: false,\n      default: true\n    }\n  }\n}\n</script>\n\n<style lang=\"postcss\">\n.page-content {\n  position: relative;\n  height: 100%;\n  z-index: 1;\n  &.scroll {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n  &.hidden {\n    overflow: hidden;\n  }\n}\n\n.page-shadow-effect {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 100%;\n  width: 16px; /*no*/\n  z-index: -1;\n  content: \"\";\n  background: linear-gradient(\n    to right,\n    rgba(0, 0, 0, 0) 0%,\n    rgba(0, 0, 0, 0) 10%,\n    rgba(0, 0, 0, 0.01) 50%,\n    rgba(0, 0, 0, 0.2) 100%\n  );\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/View/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-content\",class:this.scroll ? 'scroll' : 'hidden'},[_vm._t(\"default\")],2),_c('div',{staticClass:\"page-shadow-effect\"}),_c('div',{staticClass:\"page-opacity-effect\"})])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-69960b8c\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/View/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!vue-style-loader?{\\\"shadowMode\\\":false,\\\"sourceMap\\\":false}!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-69960b8c\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/View/index.vue\n// module id = null\n// module chunks = ","<template>\n<button class=\"icon-btn\" :class=\"{'active': isActive}\" @click=\"onClick\" @touchend.stop>\n  <i class=\"iconfont\" :class=\"iconClass\"></i>\n</button>\n</template>\n\n<script>\nexport default {\n  props: {\n    iconClass: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      isActive: false\n    }\n  },\n  methods: {\n    onClick() {\n      this.isActive = true\n      setTimeout(() => {\n        this.isActive = false\n      }, 450)\n    }\n  }\n}\n</script>\n\n\n<style lang=\"postcss\" scoped>\n.icon-btn {\n  width: 35px;\n  height: 35px;\n  padding: 0;\n  cursor: pointer;\n  color: white;\n  border: none;\n  background: transparent;\n  & i {\n    display: inline-block;\n  }\n  &:disabled {\n    opacity: 0.5;\n    cursor: default;\n  }\n}\n\n.icon-btn.active i {\n  animation-name: icon-animate;\n  animation-duration: 0.4s;\n  animation-timing-function: linear;\n  animation-iteration-count: 1;\n}\n\n@keyframes icon-animate {\n  50% {\n    opacity: 0.3;\n    transform: scale(1.6) translateZ(0);\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/IconButton/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"icon-btn\",class:{'active': _vm.isActive},on:{\"click\":_vm.onClick,\"touchend\":function($event){$event.stopPropagation();}}},[_c('i',{staticClass:\"iconfont\",class:_vm.iconClass})])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0fb4713d\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/IconButton/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!vue-style-loader?{\\\"shadowMode\\\":false,\\\"sourceMap\\\":false}!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fb4713d\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0fb4713d\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0fb4713d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/IconButton/index.vue\n// module id = null\n// module chunks = ","<template>\n<transition name=\"modal\">\n  <div class=\"modal-mask\" @touchmove.prevent>\n    <div class=\"modal-wrapper\">\n      <div class=\"modal-container\">\n\n        <div class=\"modal-header\">\n          <slot name=\"header\"></slot>\n        </div>\n\n        <div class=\"modal-body\">\n          <slot name=\"body\"></slot>\n        </div>\n\n        <div class=\"modal-footer\">\n          <slot name=\"footer\">\n            <button\n              v-show=\"showConfirmButton\"\n              class=\"modal-default-button btn-info\"\n              @click=\"$emit('confirm')\"\n            >\n              确定\n            </button>\n            <button\n              v-show=\"showCancelButton\"\n              class=\"modal-default-button btn-white\"\n              @click=\"$emit('cancel')\"\n            >\n              取消\n            </button>\n          </slot>\n        </div>\n      </div>\n    </div>\n  </div>\n</transition>\n</template>\n\n<script>\nexport default {\n  name: 'Modal',\n  props: {\n    showConfirmButton: {\n      type: Boolean,\n      default: true\n    },\n    showCancelButton: {\n      type: Boolean,\n      default: false\n    }\n  }\n}\n</script>\n\n\n<style lang=\"postcss\" scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: table;\n  transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.modal-container {\n  width: 70%;\n  max-width: 500px; /*no*/\n  margin: 0px auto;\n  padding: 20px 30px; /*no*/\n  background-color: #fff;\n  border-radius: 2px; /*no*/\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33); /*no*/\n  transition: all 0.3s ease;\n}\n\n.modal-header h3 {\n  margin-top: 0;\n  color: #42b983;\n}\n\n.modal-body {\n  margin: 20px 0; /*no*/\n  line-height: 24px; /*no*/\n}\n\n.modal-footer {\n  padding-bottom: 34px; /*no*/\n}\n\n.modal-default-button {\n  float: right;\n  margin-left: 15px;\n}\n\n.modal-enter {\n  opacity: 0;\n}\n\n.modal-leave-active {\n  opacity: 0;\n}\n\n.modal-enter .modal-container,\n.modal-leave-active .modal-container {\n  transform: scale(1.1);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Modal/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{staticClass:\"modal-mask\",on:{\"touchmove\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"modal-wrapper\"},[_c('div',{staticClass:\"modal-container\"},[_c('div',{staticClass:\"modal-header\"},[_vm._t(\"header\")],2),_c('div',{staticClass:\"modal-body\"},[_vm._t(\"body\")],2),_c('div',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showConfirmButton),expression:\"showConfirmButton\"}],staticClass:\"modal-default-button btn-info\",on:{\"click\":function($event){_vm.$emit('confirm')}}},[_vm._v(\"\\n              确定\\n            \")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showCancelButton),expression:\"showCancelButton\"}],staticClass:\"modal-default-button btn-white\",on:{\"click\":function($event){_vm.$emit('cancel')}}},[_vm._v(\"\\n              取消\\n            \")])])],2)])])])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6be3f571\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Modal/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!vue-style-loader?{\\\"shadowMode\\\":false,\\\"sourceMap\\\":false}!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6be3f571\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6be3f571\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6be3f571\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Modal/index.vue\n// module id = null\n// module chunks = ","import Modal from './'\n\nexport default {\n  install: Vue => {\n    const _Modal = Vue.extend({\n      render: function(createElement) {\n        const vm = this\n\n        if (vm.show) {\n          return createElement(\n            Modal,\n            {\n              on: {\n                cancel() {\n                  if (!vm.cancel()) {\n                    vm.show = false\n                  }\n                },\n                confirm() {\n                  if (!vm.confirm()) {\n                    vm.show = false\n                  }\n                }\n              },\n              props: {\n                showCancelButton: vm.showCancelButton,\n                showConfirmButton: vm.showConfirmButton\n              }\n            },\n            [\n              createElement('div', {\n                slot: 'body',\n                domProps: {\n                  innerHTML: vm.body\n                }\n              })\n            ]\n          )\n        }\n      },\n      data() {\n        return {\n          show: false,\n          body: '',\n          confirm: () => {},\n          cancel: () => {},\n          showCancelButton: false,\n          showConfirmButton: true\n        }\n      },\n      componetms: {\n        Modal\n      }\n    })\n\n    // 创建实例\n    const vm = new _Modal({\n      el: document.createElement('div')\n    })\n\n    // 插入文档\n    document.body.appendChild(vm.$el)\n\n    // 调用接口\n    Vue.prototype.$alert = function(options) {\n      Object.assign(\n        vm,\n        {\n          show: true,\n          body: '',\n          showCancelButton: false,\n          showConfirmButton: true,\n          cancel: () => {},\n          confirm: () => {}\n        },\n        options\n      )\n    }\n\n    Vue.prototype.$confirm = function(options) {\n      Object.assign(\n        vm,\n        {\n          show: true,\n          body: '',\n          showCancelButton: true,\n          showConfirmButton: true,\n          cancel: () => {},\n          confirm: () => {}\n        },\n        options\n      )\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modal/plugin.js","<template>\n<transition name=\"fade\">\n  <div class=\"textarea-input item-center\" v-show=\"show\">\n    <textarea\n      class=\"textarea\" \n      placeholder=\"点击输入文字\"\n      :value=\"value\"\n      @input=\"updateValue($event.target.value)\"\n      autofocus\n    >\n    </textarea>\n    <div class=\"footer-actions\">\n      <button @click.stop=\"cancle\">取消</button>\n      <button @click.stop=\"confirm\">确定</button>\n    </div>\n  </div>\n</transition>\n</template>\n\n<script>\nexport default {\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    show: {\n      type: Boolean,\n      default: false\n    },\n    clearValue: {\n      type: Boolean,\n      default: true\n    }\n  },\n  methods: {\n    cancle() {\n      this.reset()\n    },\n    confirm() {\n      this.$emit('on-confirm', this.value)\n      this.reset()\n    },\n    reset() {\n      this.$emit('update:show', false)\n\n      if (this.clearValue) {\n        setTimeout(() => {\n          this.$emit('input', '')\n        }, 300)\n      }\n    },\n    updateValue(value) {\n      this.$emit('input', value)\n    }\n  }\n}\n</script>\n\n\n<style lang=\"postcss\" scoped>\n.textarea-input {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 5;\n  background: var(--black);\n}\n.textarea {\n  width: 300px;\n  height: 200px;\n  background: transparent;\n  color: white;\n  border: none;\n  padding: 0;\n  font-size: 18px;\n  text-align: center;\n  resize: none;\n}\n.footer-actions {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n  & button {\n    display: block;\n    width: 70px;\n    height: 100%;\n    font-size: 16px;\n    color: white;\n    background: transparent;\n    border: none;\n    padding: 0;\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/Textarea/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],staticClass:\"textarea-input item-center\"},[_c('textarea',{staticClass:\"textarea\",attrs:{\"placeholder\":\"点击输入文字\",\"autofocus\":\"\"},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.updateValue($event.target.value)}}}),_c('div',{staticClass:\"footer-actions\"},[_c('button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.cancle($event)}}},[_vm._v(\"取消\")]),_c('button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.confirm($event)}}},[_vm._v(\"确定\")])])])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-620238cf\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Textarea/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!vue-style-loader?{\\\"shadowMode\\\":false,\\\"sourceMap\\\":false}!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-620238cf\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vx/test/gif-editor/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-620238cf\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-620238cf\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Textarea/index.vue\n// module id = null\n// module chunks = ","import Textarea from './'\n\nexport default {\n  install: Vue => {\n    const _Textarea = Vue.extend({\n      render: function(createElement) {\n        const that = this\n\n        return createElement(Textarea, {\n          on: {\n            input: value => {\n              that.value = value\n            },\n            'update:show': value => (that.show = value),\n            'on-confirm': that.onConfirm\n          },\n          props: {\n            show: that.show,\n            value: that.value\n          }\n        })\n      },\n      data() {\n        return {\n          show: false,\n          value: '',\n          onConfirm: () => {}\n        }\n      },\n      componetms: {\n        Textarea\n      }\n    })\n\n    // 创建实例\n    const vm = new _Textarea({\n      el: document.createElement('div')\n    })\n\n    // 插入文档\n    document.body.appendChild(vm.$el)\n\n    // 调用接口\n    Vue.prototype.$textarea = function(options) {\n      Object.assign(\n        vm,\n        {\n          show: true,\n          value: '',\n          onConfirm: () => {}\n        },\n        options\n      )\n    }\n\n    window._Vue = Vue\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Textarea/plugin.js","import Vue from 'vue'\nimport App from '@/App.vue'\nimport router from '@/router'\nimport store from '@/store'\n\nimport * as filters from '@/utils/filters'\nimport * as directives from '@/utils/directives'\nimport View from '@/components/View'\nimport IconButton from '@/components/IconButton'\nimport ModalPlugin from '@/components/Modal/plugin'\nimport TextareaPlugin from '@/components/Textarea/plugin'\n\nVue.config.productionTip = false\n\n// 注册全局过滤器、指令、组件：\n\nObject.keys(filters).forEach(key => {\n  Vue.filter(key, filters[key])\n})\n\nObject.keys(directives).forEach(key => {\n  Vue.directive(key, directives[key])\n})\n\nVue.component('app-view', View)\nVue.component('icon-button', IconButton)\n\nVue.use(ModalPlugin)\nVue.use(TextareaPlugin)\n\nnew Vue({ router, store, ...App }).$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".page-content{position:relative;height:100%;z-index:1}.page-content.scroll{overflow:auto;-webkit-overflow-scrolling:touch}.page-content.hidden{overflow:hidden}.page-shadow-effect{position:absolute;top:0;bottom:0;right:100%;width:16px;z-index:-1;content:\\\"\\\";background:-webkit-gradient(linear,left top,right top,from(transparent),color-stop(10%,transparent),color-stop(50%,rgba(0,0,0,.01)),to(rgba(0,0,0,.2)));background:linear-gradient(90deg,transparent 0,transparent 10%,rgba(0,0,0,.01) 50%,rgba(0,0,0,.2))}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"scoped\":false,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/View/index.vue\n// module id = PS7y\n// module chunks = 13","/* eslint-env node */\n\nmodule.exports = {\n  isDev: process.env.NODE_ENV === 'development',\n  isProduction: process.env.NODE_ENV === 'production',\n  assetsDomain: 'https://o818xvhxo.qnssl.com/gif/build'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".modal-mask[data-v-6be3f571]{position:fixed;z-index:9998;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:table;-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.modal-wrapper[data-v-6be3f571]{display:table-cell;vertical-align:middle}.modal-container[data-v-6be3f571]{width:70%;max-width:500px;margin:0 auto;padding:20px 30px;background-color:#fff;border-radius:2px;-webkit-box-shadow:0 .125rem .5rem rgba(0,0,0,.33);box-shadow:0 2px 8px rgba(0,0,0,.33);-webkit-transition:all .3s ease;transition:all .3s ease}.modal-header h3[data-v-6be3f571]{margin-top:0;color:#42b983}.modal-body[data-v-6be3f571]{margin:20px 0;line-height:24px}.modal-footer[data-v-6be3f571]{padding-bottom:34px}.modal-default-button[data-v-6be3f571]{float:right;margin-left:.9375rem}.modal-enter[data-v-6be3f571],.modal-leave-active[data-v-6be3f571]{opacity:0}.modal-enter .modal-container[data-v-6be3f571],.modal-leave-active .modal-container[data-v-6be3f571]{-webkit-transform:scale(1.1);transform:scale(1.1)}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"id\":\"data-v-6be3f571\",\"scoped\":true,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Modal/index.vue\n// module id = VpHb\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-620238cf\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"55c50b9e\", content, true, {\"shadowMode\":false,\"sourceMap\":false});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader?{\"shadowMode\":false,\"sourceMap\":false}!./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"id\":\"data-v-620238cf\",\"scoped\":true,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Textarea/index.vue\n// module id = ZNEq\n// module chunks = 13","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".textarea-input[data-v-620238cf]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:5;background:#282c34}.textarea[data-v-620238cf]{width:18.75rem;height:12.5rem;background:transparent;color:#fff;border:none;padding:0;font-size:1.125rem;text-align:center;resize:none}.footer-actions[data-v-620238cf]{position:absolute;left:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;height:3.125rem;line-height:3.125rem}.footer-actions button[data-v-620238cf]{display:block;width:4.375rem;height:100%;font-size:1rem;color:#fff;background:transparent;border:none;padding:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"id\":\"data-v-620238cf\",\"scoped\":true,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Textarea/index.vue\n// module id = gEkU\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5cb3aad0\", content, true, {\"shadowMode\":false,\"sourceMap\":false});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader?{\"shadowMode\":false,\"sourceMap\":false}!./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"scoped\":false,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/App.vue\n// module id = kG3Q\n// module chunks = 13","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"a,abbr,address,article,aside,audio,b,big,blockquote,body,caption,center,cite,code,dd,del,details,dfn,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,label,legend,li,mark,menu,nav,ol,output,p,pre,q,ruby,s,samp,section,small,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,u,ul,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:\\\"\\\";content:none}table{border-collapse:collapse;border-spacing:0}a{text-decoration:none}a,button,div,input,select,textarea{-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:transparent!important;outline:none}html{font-size:16px;font-family:sans-serif;-webkit-text-size-adjust:100%}a,img,label{-webkit-tap-highlight-color:rgba(255,255,255,0)}input:focus{outline:0}@media screen and (min-width:414px) and (max-width:767px){html{font-size:16.96px}}@media screen and (min-width:768px){html{font-size:20px}}.blue{color:#7cdbd5}.blue-bg{background-color:#7cdbd5}.dark-blue{color:#02c8a7}.dark-blue-bg{background-color:#02c8a7}.gray{color:#ccc}.gray-bg{background-color:#ccc}.yellow{color:#f9be02}.yellow-bg{background-color:#f9be02}.red{color:#f53240}.red-bg{background-color:#f53240}[class*=f-bd]{position:relative}[class*=f-bd]:after{position:absolute;z-index:2;content:\\\"\\\";top:0;left:0;pointer-events:none;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;-webkit-transform-origin:top left;transform-origin:top left;border:0 solid #ccc}.f-bd-top:after{border-top-width:1px}.f-bd-btm:after{border-bottom-width:1px}.f-bd-tb:after{border-width:1px 0}.f-bd-left:after{border-left-width:1px}.f-bd-right:after{border-right-width:1px}.f-bd-lr:after{border-width:0 1px}.f-bd-full:after{border-width:1px}@media screen and (-webkit-min-device-pixel-ratio:1.5){[class*=f-bd]:after{width:150%;height:150%;-webkit-transform:scale(.666666);transform:scale(.666666)}}@media screen and (-webkit-min-device-pixel-ratio:2){[class*=f-bd]:after{width:200%;height:200%;-webkit-transform:scale(.5);transform:scale(.5)}}@media screen and (-webkit-min-device-pixel-ratio:3){[class*=f-bd]:after{width:300%;height:300%;-webkit-transform:scale(.333333);transform:scale(.333333)}}[class*=btn-]{display:inline-block;font-weight:400;padding:.3125rem .625rem;font-size:.875rem;background-color:transparent;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;border-radius:.125rem;border:1px solid transparent;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box}[class*=btn-]:active{-webkit-transform:scale(.9) translateZ(0);transform:scale(.9) translateZ(0)}.btn-info{color:#fff;background-color:#7cdbd5;border-color:#7cdbd5}.btn-outline-info{color:#7cdbd5;background-color:transparent;background-image:none;border-color:#7cdbd5}.btn-white{color:#000;background-color:#fff;border-color:#fff}.btn-outline-white{color:#fff;background-color:transparent;background-image:none;border-color:#fff}.btn-block{display:block;width:100%}.btn-small{padding:.1875rem .5rem;font-size:.75rem}.btn-large{padding:.5rem 1rem;font-size:1.125rem;line-height:1.5;border-radius:.1875rem}.display-block{display:block}.display-none{display:none}.item-center{display:-webkit-box;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@font-face{font-family:iconfont;src:url(\\\"/assets/font/iconfont.eot?t=1525327185527\\\");src:url(\\\"/assets/font/iconfont.eot?t=1525327185527#iefix\\\") format(\\\"embedded-opentype\\\"),url(\\\"data:application/x-font-woff;charset=utf-8;base64,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\\\") format(\\\"woff\\\"),url(\\\"/assets/font/iconfont.ttf?t=1525327185527\\\") format(\\\"truetype\\\"),url(\\\"/assets/font/iconfont.svg?t=1525327185527#iconfont\\\") format(\\\"svg\\\")}.iconfont{font-family:iconfont!important;font-size:1rem;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-play:before{content:\\\"\\\\34AD\\\"}.icon-new:before{content:\\\"\\\\E61D\\\"}.icon-delete:before{content:\\\"\\\\E648\\\"}.icon-pencil:before{content:\\\"\\\\EB89\\\"}.icon-point:before{content:\\\"\\\\E6A3\\\"}.icon-pause:before{content:\\\"\\\\E7D2\\\"}.icon-help:before{content:\\\"\\\\E616\\\"}.icon-ico-correct:before{content:\\\"\\\\E61E\\\"}.icon-close:before{content:\\\"\\\\E656\\\"}.icon-upload:before{content:\\\"\\\\E674\\\"}.icon-color:before{content:\\\"\\\\E601\\\"}.icon-pa_checked01:before{content:\\\"\\\\E66C\\\"}.icon-Zoom:before{content:\\\"\\\\E615\\\"}.icon-eraser:before{content:\\\"\\\\E71C\\\"}.icon-upload1:before{content:\\\"\\\\E64E\\\"}.icon-download:before{content:\\\"\\\\E64F\\\"}.icon-next:before{content:\\\"\\\\E654\\\"}.icon-previous:before{content:\\\"\\\\E655\\\"}.icon-undo:before{content:\\\"\\\\E65A\\\"}.icon-redo:before{content:\\\"\\\\E65B\\\"}.icon-ico-typelayer-ZIpQl:before{content:\\\"\\\\E675\\\"}.icon-masaike:before{content:\\\"\\\\E611\\\"}body,html{overflow-x:hidden}#app,body,html{height:100%;width:100%}#app{position:relative}.page-view{position:absolute;left:0;top:0;width:100%;height:100%;background-color:#fff}.page-in-enter-active,.page-in-leave-active,.page-out-enter-active,.page-out-leave-active{will-change:transform;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;perspective:1000}.page-out-leave,.page-out-leave-to{z-index:2}.page-in-enter-to,.page-in-leave,.page-out-enter-to,.page-out-leave{-webkit-transform:translateZ(0);transform:translateZ(0)}.page-in-enter,.page-out-leave-to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.page-in-leave-to,.page-out-enter{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0)}.page-in-leave-active.page-opacity-effect,.page-out-enter-active.page-opacity-effect{position:absolute;left:0;top:0;bottom:0;width:100%;background:rgba(0,0,0,.1);z-index:10000}.page-in-leave.page-opacity-effect{opacity:0}.page-in-leave-to.page-opacity-effect{opacity:1;-webkit-transition:opacity .4s;transition:opacity .4s}.page-out-enter.page-opacity-effect{opacity:1}.page-out-enter-to.page-opacity-effect{opacity:0;-webkit-transition:opacity .4s;transition:opacity .4s}.fade-enter-active,.fade-leave-active{-webkit-transition:opacity .5s;transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":false,\"minimize\":true}!./node_modules/vue-loader/lib/style-compiler?{\"optionsId\":\"0\",\"vue\":true,\"scoped\":false,\"sourceMap\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/App.vue\n// module id = kr3J\n// module chunks = 13","export default class Stream {\n  constructor(data) {\n    this.data = data\n    this.len = this.data.length\n    this.pos = 0\n  }\n\n  readByte() {\n    if (this.pos >= this.data.length) {\n      throw new Error('Attempted to read past end of stream.')\n    }\n    if (this.data instanceof Uint8Array) return this.data[this.pos++]\n    else return this.data.charCodeAt(this.pos++) & 0xff\n  }\n\n  readBytes(n) {\n    const bytes = []\n    for (let i = 0; i < n; i++) {\n      bytes.push(this.readByte())\n    }\n    return bytes\n  }\n\n  read(n) {\n    let s = ''\n    for (let i = 0; i < n; i++) {\n      s += String.fromCharCode(this.readByte())\n    }\n    return s\n  }\n\n  readUnsigned() {\n    // Little-endian.\n    const a = this.readBytes(2)\n    return (a[1] << 8) + a[0]\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/gif/stream.js","// Generic functions\nexport function bitsToNum(ba) {\n  return ba.reduce(function(s, n) {\n    return s * 2 + n\n  }, 0)\n}\n\nexport function byteToBitArr(bite) {\n  const a = []\n  for (let i = 7; i >= 0; i--) {\n    a.push(!!(bite & (1 << i)))\n  }\n  return a\n}\n\nexport function lzwDecode(minCodeSize, data) {\n  // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\n  var pos = 0 // Maybe this streaming thing should be merged with the Stream?\n  var readCode = function(size) {\n    var code = 0\n    for (var i = 0; i < size; i++) {\n      if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\n        code |= 1 << i\n      }\n      pos++\n    }\n    return code\n  }\n\n  var output = []\n\n  var clearCode = 1 << minCodeSize\n  var eoiCode = clearCode + 1\n\n  var codeSize = minCodeSize + 1\n\n  var dict = []\n\n  var clear = function() {\n    dict = []\n    codeSize = minCodeSize + 1\n    for (var i = 0; i < clearCode; i++) {\n      dict[i] = [i]\n    }\n    dict[clearCode] = []\n    dict[eoiCode] = null\n  }\n\n  var code\n  var last\n  var flag = true\n\n  while (flag) {\n    last = code\n    code = readCode(codeSize)\n\n    if (code === clearCode) {\n      clear()\n      continue\n    }\n    if (code === eoiCode) break\n\n    if (code < dict.length) {\n      if (last !== clearCode) {\n        dict.push(dict[last].concat(dict[code][0]))\n      }\n    } else {\n      if (code !== dict.length) throw new Error('Invalid LZW code.')\n      dict.push(dict[last].concat(dict[last][0]))\n    }\n    output.push.apply(output, dict[code])\n\n    if (dict.length === 1 << codeSize && codeSize < 12) {\n      // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\n      codeSize++\n    }\n  }\n\n  // I don't know if this is technically an error, but some GIFs do it.\n  // if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\n  return output\n}\n\nexport function deinterlace(pixels, width) {\n  // Of course this defeats the purpose of interlacing. And it's *probably*\n  // the least efficient way it's ever been implemented. But nevertheless...\n  var newPixels = new Array(pixels.length)\n  var rows = pixels.length / width\n  var cpRow = function(toRow, fromRow) {\n    var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width)\n    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels))\n  }\n\n  // See appendix E.\n  var offsets = [0, 4, 2, 1]\n  var steps = [8, 8, 4, 2]\n\n  var fromRow = 0\n  for (var pass = 0; pass < 4; pass++) {\n    for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n      cpRow(toRow, fromRow)\n      fromRow++\n    }\n  }\n\n  return newPixels\n}\n\nexport function fileToArrayBuffer(file, callback, errorCallback) {\n  const fileReader = new window.FileReader()\n\n  fileReader.onload = e => {\n    callback(e.target.result)\n  }\n  fileReader.onerror = errorCallback || function() {}\n\n  fileReader.readAsArrayBuffer(file)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/gif/utils.js","import Stream from './stream'\nimport EventEmitter from '@/plugins/eventEmitter'\nimport {\n  bitsToNum,\n  byteToBitArr,\n  lzwDecode,\n  deinterlace,\n  fileToArrayBuffer\n} from './utils'\n\nexport default class Parser extends EventEmitter {\n  constructor() {\n    super()\n\n    this.stream = null\n  }\n\n  reset() {\n    this.stream = null\n  }\n\n  load(src, callback) {\n    const that = this\n\n    if (\n      window.FileReader &&\n      (src instanceof window.Blob || src instanceof window.File)\n    ) {\n      if (src.type !== 'image/gif') {\n        that.emit('parseError')\n        return\n      }\n      fileToArrayBuffer(\n        src,\n        arrayBuffer => {\n          const data = new Uint8Array(arrayBuffer)\n          const size = src.size\n\n          that.emit('loadProgress', size, size)\n          that.loadEnd(data, callback)\n        },\n        error => {\n          that.emit('loadError', error)\n        }\n      )\n      return\n    }\n\n    that.req = new window.XMLHttpRequest()\n\n    // new browsers (XMLHttpRequest2-compliant)\n    that.req.open('GET', src, true)\n\n    if ('overrideMimeType' in that.req) {\n      that.req.overrideMimeType('text/plain; charset=x-user-defined')\n    } else if ('responseType' in that.req) {\n      // old browsers (XMLHttpRequest-compliant)\n      that.req.responseType = 'arraybuffer'\n    } else {\n      // IE9 (Microsoft.XMLHTTP-compliant)\n      that.req.setRequestHeader('Accept-Charset', 'x-user-defined')\n    }\n\n    // req.onloadstart = function () {\n    // }\n\n    that.req.onload = function() {\n      if (this.status !== 200) {\n        that.emit('loadError', { status: this.status })\n      }\n\n      // emulating response field for IE9\n      if (!('response' in this)) {\n        this.response = new window.VBArray(this.responseText)\n          .toArray()\n          .map(String.fromCharCode)\n          .join('')\n      }\n\n      var data = this.response\n\n      if (data.toString().indexOf('ArrayBuffer') > 0) {\n        data = new Uint8Array(data)\n      }\n\n      that.loadEnd(data, callback)\n    }\n\n    that.req.onprogress = function(e) {\n      if (e.lengthComputable) {\n        that.emit('loadProgress', e.loaded, e.total)\n      }\n    }\n\n    that.req.onerror = function(error) {\n      that.emit('loadError', error)\n      that.req = null\n    }\n\n    that.req.send()\n\n    return that\n  }\n\n  loadAbort() {\n    if (this.req) {\n      this.req.abort()\n      this.req = null\n      this.emit('loadAbort')\n    }\n  }\n\n  loadEnd(data, callback) {\n    const that = this\n\n    that.stream = new Stream(data)\n\n    setTimeout(() => {\n      callback && callback()\n      that.emit('loaded')\n      that.req = null\n      that.parse()\n    }, 0)\n  }\n\n  parse() {\n    try {\n      this.parseHeader()\n      setTimeout(() => {\n        this.parseBlock()\n      }, 0)\n    } catch (error) {\n      this.emit('parseError', error)\n    }\n  }\n\n  parseCT(entries) {\n    // Each entry is 3 bytes, for RGB.\n    var ct = []\n    for (var i = 0; i < entries; i++) {\n      ct.push(this.stream.readBytes(3))\n    }\n    return ct\n  }\n\n  readSubBlocks() {\n    var size, data\n    data = ''\n    do {\n      size = this.stream.readByte()\n      data += this.stream.read(size)\n    } while (size !== 0)\n    return data\n  }\n\n  parseHeader() {\n    var hdr = {}\n    hdr.sig = this.stream.read(3)\n    hdr.ver = this.stream.read(3)\n    if (hdr.sig !== 'GIF') throw new Error('Not a GIF file.') // XXX: This should probably be handled more nicely.\n    hdr.width = this.stream.readUnsigned()\n    hdr.height = this.stream.readUnsigned()\n\n    var bits = byteToBitArr(this.stream.readByte())\n    hdr.gctFlag = bits.shift()\n    hdr.colorRes = bitsToNum(bits.splice(0, 3))\n    hdr.sorted = bits.shift()\n    hdr.gctSize = bitsToNum(bits.splice(0, 3))\n\n    hdr.bgColor = this.stream.readByte()\n    hdr.pixelAspectRatio = this.stream.readByte() // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n    if (hdr.gctFlag) {\n      hdr.gct = this.parseCT(1 << (hdr.gctSize + 1))\n    }\n    this.setParseStatus('parseHeader', hdr)\n  }\n\n  parseImg(img) {\n    img.leftPos = this.stream.readUnsigned()\n    img.topPos = this.stream.readUnsigned()\n    img.width = this.stream.readUnsigned()\n    img.height = this.stream.readUnsigned()\n\n    var bits = byteToBitArr(this.stream.readByte())\n    img.lctFlag = bits.shift()\n    img.interlaced = bits.shift()\n    img.sorted = bits.shift()\n    img.reserved = bits.splice(0, 2)\n    img.lctSize = bitsToNum(bits.splice(0, 3))\n\n    if (img.lctFlag) {\n      img.lct = this.parseCT(1 << (img.lctSize + 1))\n    }\n\n    img.lzwMinCodeSize = this.stream.readByte()\n\n    var lzwData = this.readSubBlocks()\n\n    img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData)\n\n    if (img.interlaced) {\n      // Move\n      img.pixels = deinterlace(img.pixels, img.width)\n    }\n\n    this.setParseStatus('parseImg', img)\n  }\n\n  parseBlock() {\n    const that = this\n\n    var block = {}\n    block.sentinel = that.stream.readByte()\n\n    switch (String.fromCharCode(block.sentinel)) { // For ease of matching\n      case '!':\n        block.type = 'ext'\n        that.parseExt(block)\n        break\n      case ',':\n        block.type = 'img'\n        that.parseImg(block)\n        break\n      case ';':\n        block.type = 'eof'\n        that.emit('parseEnd', block)\n        break\n      default:\n        throw new Error('Unknown block: 0x' + block.sentinel.toString(16)) // TODO: Pad this with a 0.\n    }\n\n    if (block.type !== 'eof') {\n      setTimeout(() => {\n        that.parseBlock()\n      }, 0)\n    }\n  }\n\n  parseExt(block) {\n    block.label = this.stream.readByte()\n    switch (block.label) {\n      case 0xf9:\n        block.extType = 'gce'\n        this.parseGCExt(block)\n        break\n      case 0xfe:\n        block.extType = 'com'\n        this.parseComExt(block)\n        break\n      case 0x01:\n        block.extType = 'pte'\n        this.parsePTExt(block)\n        break\n      case 0xff:\n        block.extType = 'app'\n        this.parseAppExt(block)\n        break\n      default:\n        block.extType = 'unknown'\n        this.parseUnknownExt(block)\n        break\n    }\n  }\n\n  parseGCExt(block) {\n    this.stream.readByte() // Always 4\n    var bits = byteToBitArr(this.stream.readByte())\n    block.reserved = bits.splice(0, 3) // Reserved; should be 000.\n    block.disposalMethod = bitsToNum(bits.splice(0, 3))\n    block.userInput = bits.shift()\n    block.transparencyGiven = bits.shift()\n\n    block.delayTime = this.stream.readUnsigned()\n\n    block.transparencyIndex = this.stream.readByte()\n\n    block.terminator = this.stream.readByte()\n\n    this.setParseStatus('parseGCExt', block)\n  }\n\n  parseComExt(block) {\n    block.comment = this.readSubBlocks()\n    this.setParseStatus('parseComExt', block)\n  }\n\n  parsePTExt(block) {\n    // No one *ever* uses this. If you use it, deal with parsing it yourself.\n    this.stream.readByte() // Always 12\n    block.ptHeader = this.stream.readBytes(12)\n    block.ptData = this.readSubBlocks()\n    this.setParseStatus('parsePTExt', block)\n  }\n\n  parseAppExt(block) {\n    const that = this\n\n    var parseNetscapeExt = function(block) {\n      that.stream.readByte() // Always 3\n      block.unknown = that.stream.readByte() // ??? Always 1? What is this?\n      block.iterations = that.stream.readUnsigned()\n      block.terminator = that.stream.readByte()\n      that.setParseStatus('parseAppExt', block)\n    }\n\n    var parseUnknownAppExt = function(block) {\n      block.appData = that.readSubBlocks()\n      that.setParseStatus('parseUnknownAppExt', block)\n    }\n\n    that.stream.readByte() // Always 11\n    block.identifier = that.stream.read(8)\n    block.authCode = that.stream.read(3)\n    switch (block.identifier) {\n      case 'NETSCAPE':\n        parseNetscapeExt(block)\n        break\n      default:\n        parseUnknownAppExt(block)\n        break\n    }\n  }\n\n  parseUnknownExt(block) {\n    block.data = this.readSubBlocks()\n    this.setParseStatus('parseUnknownExt', block)\n  }\n\n  setParseStatus(eventName, data) {\n    this.emit(eventName, data)\n    this.emit(\n      'parseProgress',\n      eventName,\n      this.stream.pos,\n      this.stream.data.length\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/gif/parser.js","import EventEmitter from '@/plugins/eventEmitter'\nimport Parser from './parser'\n\nexport default class Gif extends EventEmitter {\n  constructor() {\n    super()\n    this.frames = []\n    this.frame = null\n    this.frameOffsets = []\n    this.lastImg = null\n    this.disposalRestoreFromIdx = null\n    this.transparency = null\n    this.delay = null\n    this.lastDisposalMethod = null\n    this.disposalMethod = null\n    this.timer = null\n    this.frameIndex = -1\n    this.parser = new Parser()\n  }\n\n  init() {\n    const that = this\n\n    that.create()\n    ;['parseHeader', 'parseImg', 'parseGCExt', 'parseEnd'].forEach(name => {\n      that.parser.on(name, data => {\n        that[name](data)\n      })\n    })\n\n    return that\n  }\n\n  load(url) {\n    this.pause()\n    this.reset()\n    this.parser.load(url)\n    return this\n  }\n\n  create() {\n    const that = this\n\n    that.canvas = document.createElement('canvas')\n    that.ctx = that.canvas.getContext('2d')\n    that.tmpCanvas = document.createElement('canvas')\n    that.tmpCtx = that.tmpCanvas.getContext('2d')\n  }\n\n  render(el) {\n    el.appendChild(this.canvas)\n  }\n\n  destory(el) {\n    el.removeChild(this.canvas)\n  }\n\n  setFrameOffset(frame, offset) {\n    if (!this.frameOffsets[frame]) {\n      this.frameOffsets[frame] = offset\n      return\n    }\n    if (typeof offset.x !== 'undefined') {\n      this.frameOffsets[frame].x = offset.x\n    }\n    if (typeof offset.y !== 'undefined') {\n      this.frameOffsets[frame].y = offset.y\n    }\n  }\n\n  pushFrame() {\n    if (!this.frame) return\n\n    this.frames.push({\n      data: this.frame.getImageData(\n        0,\n        0,\n        this.header.width,\n        this.header.height\n      ),\n      delay: this.delay\n    })\n    this.frameOffsets.push({ x: 0, y: 0 })\n  }\n\n  clear() {\n    this.transparency = null\n    this.delay = null\n    this.lastDisposalMethod = this.disposalMethod\n    this.disposalMethod = null\n    this.frame = null\n    this.lastImg = null\n  }\n\n  reset() {\n    this.clear()\n    this.frames.length = 0\n    this.frameOffsets.length = 0\n    this.frameIndex = -1\n    this.parser.reset()\n    this.ctx.clearRect(0, 0, this.tmpCanvas.width, this.tmpCanvas.height)\n    this.tmpCtx.clearRect(0, 0, this.tmpCanvas.width, this.tmpCanvas.height)\n  }\n\n  setFrameIndex(index) {\n    this.frameIndex = index\n    this.emit('frameIndex', index)\n  }\n\n  parseHeader(header) {\n    const that = this\n\n    that.canvas.width = that.tmpCanvas.width = header.width\n    that.canvas.height = that.tmpCanvas.height = header.height\n    that.header = header\n  }\n\n  parseImg(img) {\n    if (!this.frame) this.frame = this.tmpCanvas.getContext('2d')\n\n    const currIdx = this.frames.length\n\n    // ct = color table, gct = global color table\n    var ct = img.lctFlag ? img.lct : this.header.gct // TODO: What if neither exists?\n    /*\n      Disposal method indicates the way in which the graphic is to\n      be treated after being displayed.\n\n      Values :    0 - No disposal specified. The decoder is\n                      not required to take any action.\n                  1 - Do not dispose. The graphic is to be left\n                      in place.\n                  2 - Restore to background color. The area used by the\n                      graphic must be restored to the background color.\n                  3 - Restore to previous. The decoder is required to\n                      restore the area overwritten by the graphic with\n                      what was there prior to rendering the graphic.\n\n                      Importantly, \"previous\" means the frame state\n                      after the last disposal of method 0, 1, or 2.\n    */\n    if (currIdx > 0) {\n      if (this.lastDisposalMethod === 3) {\n        // Restore to previous\n        // If we disposed every frame including first frame up to this point, then we have\n        // no composited frame to restore to. In this case, restore to background instead.\n        if (this.disposalRestoreFromIdx !== null) {\n          this.frame.putImageData(\n            this.frames[this.disposalRestoreFromIdx].data,\n            0,\n            0\n          )\n        } else {\n          this.frame.clearRect(\n            this.lastImg.leftPos,\n            this.lastImg.topPos,\n            this.lastImg.width,\n            this.lastImg.height\n          )\n        }\n      } else {\n        this.disposalRestoreFromIdx = currIdx - 1\n      }\n\n      if (this.lastDisposalMethod === 2 && this.lastImg) {\n        // Restore to background color\n        // Browser implementations historically restore to transparent; we do the same.\n        // http://www.wizards-toolkit.org/discourse-server/viewtopic.php?f=1&t=21172#p86079\n        this.frame.clearRect(\n          this.lastImg.leftPos,\n          this.lastImg.topPos,\n          this.lastImg.width,\n          this.lastImg.height\n        )\n      }\n    }\n    // else, Undefined/Do not dispose.\n    // frame contains final pixel data from the last frame; do nothing\n\n    // Get existing pixels for img region after applying disposal method\n    var imgData = this.frame.getImageData(\n      img.leftPos,\n      img.topPos,\n      img.width,\n      img.height\n    )\n\n    // apply color table colors\n    img.pixels.forEach((pixel, i) => {\n      // imgData.data === [R,G,B,A,R,G,B,A,...]\n      if (pixel !== this.transparency) {\n        imgData.data[i * 4 + 0] = ct[pixel][0]\n        imgData.data[i * 4 + 1] = ct[pixel][1]\n        imgData.data[i * 4 + 2] = ct[pixel][2]\n        imgData.data[i * 4 + 3] = 255 // Opaque.\n      }\n    })\n\n    this.frame.putImageData(imgData, img.leftPos, img.topPos)\n\n    this.lastImg = img\n  }\n\n  parseGCExt(gce) {\n    this.pushFrame()\n    this.clear()\n    this.transparency = gce.transparencyGiven ? gce.transparencyIndex : null\n    this.delay = gce.delayTime\n    this.disposalMethod = gce.disposalMethod\n  }\n\n  parseEnd() {\n    this.pushFrame()\n    this.clear()\n    this.header = null\n    this.parser.reset()\n  }\n\n  drawFrame(index) {\n    const offset = this.frameOffsets[index]\n\n    this.tmpCtx.putImageData(this.frames[index].data, offset.x, offset.y)\n    this.ctx.clearRect(0, 0, this.tmpCanvas.width, this.tmpCanvas.height)\n    this.ctx.drawImage(this.tmpCanvas, 0, 0)\n  }\n\n  jump(index, position) {\n    this.pause()\n\n    const endIndex = this.frames.length - 1\n\n    if (position !== 'absolute') {\n      index += this.frameIndex\n    }\n\n    if (index > endIndex) {\n      index = endIndex\n    } else if (index < 0) {\n      index = 0\n    }\n\n    this.setFrameIndex(index)\n    this.drawFrame(index)\n  }\n\n  play(loop) {\n    loop = loop !== false\n\n    this.pause()\n\n    const endIndex = this.frames.length - 1\n    let currentIndex = this.frameIndex\n\n    if (this.frameIndex >= endIndex) {\n      if (loop) {\n        currentIndex = -1\n      } else {\n        this.pause()\n        return\n      }\n    }\n\n    const index = currentIndex + 1\n    const delay = this.frames[index].delay * 10\n\n    this.timer = setTimeout(() => {\n      this.drawFrame(index)\n      this.emit('play', index)\n      this.setFrameIndex(index)\n\n      this.play(loop)\n    }, delay || 100)\n  }\n\n  pause() {\n    clearTimeout(this.timer)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/gif/index.js","import EventEmitter from '@/plugins/eventEmitter'\n\n/**\n * 撤销、重做历史记录\n */\nexport default class History extends EventEmitter {\n  constructor() {\n    super()\n    // 记录栈\n    this.stack = []\n    // 当前指针\n    this.index = 0\n    this.disableUndo = true\n    this.disableRedo = true\n    // this.max = 30\n  }\n  push({ action, info = {} }) {\n    // if (this.index > this.max) {}\n    this.stack[this.index++] = { action, info }\n    this.stack.length = this.index\n    this.input()\n  }\n  undo() {\n    if (this.index > 0) {\n      this.stack[--this.index].action.undo(...arguments)\n      this.input()\n    }\n  }\n  redo() {\n    if (this.index < this.stack.length) {\n      this.stack[this.index++].action.redo(...arguments)\n      this.input()\n    }\n  }\n  input() {\n    this.disableUndo = this.index <= 0\n    this.disableRedo = this.index >= this.stack.length\n    this.emit('input', this)\n  }\n  each(callback, index) {\n    index = typeof index !== 'undefined' ? index : this.index\n\n    for (let i = 0; i < index; i++) {\n      callback(this.stack[i], i)\n    }\n  }\n  reset() {\n    this.stack.length = 0\n    this.index = 0\n    this.disableUndo = true\n    this.disableRedo = true\n    this.input()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/history.js","export class Text {\n  constructor(props) {\n    Object.assign(this, Text.defaultProps, props)\n    this.setSize()\n  }\n  draw(ctx) {\n    ctx.save()\n    ctx.translate(this.x, this.y)\n    ctx.font = this.font\n    ctx.fillStyle = this.fillStyle\n    ctx.textAlign = this.textAlign\n    ctx.textBaseline = this.textBaseline\n    ctx.fillText(this.text, 0, 0)\n    ctx.restore()\n\n    return this\n  }\n  setSize() {\n    this.width = Text.getTextWidth(this.text, this.font)\n    this.height = this.getFontSize()\n  }\n  getFontSize() {\n    return parseInt(this.font.split(' ')[0])\n  }\n  setFontSize(size) {\n    const items = this.font.split(' ')\n    items[0] = size + 'px'\n    this.font = items.join(' ')\n  }\n  setProps(props) {\n    if (typeof props.height === 'number' && props.height !== this.height) {\n      this.setFontSize(props.height)\n    }\n    Object.assign(this, props)\n  }\n  getProps() {\n    return Object.assign({}, this)\n  }\n\n  static defaultProps = {\n    TYPE: 'text',\n    MOVE: true,\n    x: 0,\n    y: 0,\n    font: '26px SimHei bold',\n    fillStyle: '#000',\n    textAlign: 'start',\n    textBaseline: 'hanging'\n  }\n\n  static getTextWidth(text, font) {\n    let canvas = document.createElement('canvas')\n    let ctx = canvas.getContext('2d')\n    ctx.font = font\n    ctx.fillText(text, 0, 0)\n    const width = ctx.measureText(text).width\n    ctx = null\n    canvas = null\n    return width\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/elements/text.js","export class Line {\n  constructor(props) {\n    Object.assign(this, Line.defaultProps, props)\n  }\n  moveTo(ctx, x, y) {\n    this.points = []\n    this.setStyle(ctx)\n    ctx.beginPath()\n    ctx.moveTo(x, y)\n    this.pushPoint(x, y)\n  }\n  lineTo(ctx, x, y) {\n    ctx.lineTo(x, y)\n    ctx.stroke()\n    this.pushPoint(x, y)\n  }\n  pushPoint(x, y) {\n    this.points.push(x)\n    this.points.push(y)\n  }\n  eachPoint(callback) {\n    const length = this.points.length\n    let i = 2\n\n    while (i < length) {\n      callback(this.points[i], this.points[i + 1])\n      i += 2\n    }\n  }\n  setStyle(ctx) {\n    ctx.strokeStyle = this.strokeStyle\n    ctx.lineWidth = this.lineWidth\n    // 线两端样式圆滑\n    ctx.lineJoin = ctx.lineCap = 'round'\n\n    // 平滑边缘，抗锯齿\n    // ctx.shadowBlur = 1\n    // ctx.shadowColor = 'rgb(0, 0, 0)'\n  }\n  setProps(props) {\n    Object.assign(this, props)\n  }\n  getProps() {\n    return Object.assign({}, this)\n  }\n  draw(ctx) {\n    if (this.points.length > 1) {\n      ctx.save()\n      this.setStyle(ctx)\n      ctx.beginPath()\n      ctx.moveTo(this.points[0], this.points[1])\n      this.eachPoint((x, y) => {\n        ctx.lineTo(x, y)\n      })\n      ctx.stroke()\n      ctx.restore()\n    }\n  }\n  static defaultProps = {\n    TYPE: 'line',\n    strokeStyle: '#000',\n    lineWidth: 2\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/elements/line.js","export class Gather {\n  constructor(props) {\n    Object.assign(this, props)\n    this.TYPE = 'gather'\n  }\n  draw(ctx) {\n    let length = this.elements.length\n    for (let i = 0; i < length; i++) {\n      this.elements[i].draw(ctx)\n    }\n  }\n  setProps(props) {\n    Object.assign(this, props)\n  }\n  getProps() {\n    return Object.assign({}, this)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/elements/gather.js","import Handler from '@/plugins/handler'\n\nexport class Border {\n  constructor() {\n    const that = this\n\n    that.padding = 10\n    that.ratio = 1\n    that.offsetLeft = 0\n    that.offsetTop = 0\n    that.zoom = new Handler()\n  }\n  render(container) {\n    this.create()\n    this.bindEvent()\n    container.appendChild(this.el)\n  }\n  create() {\n    const div = document.createElement('div')\n    div.innerHTML = Border.template\n\n    this.el = div.querySelector('div:first-child')\n  }\n  bindEvent() {\n    const point = this.el.querySelector('.zoom')\n\n    this.zoom.bind(point)\n  }\n  draw(rect) {\n    const that = this\n    that.styles = {\n      width: rect.width * that.ratio + that.padding * 2,\n      height: rect.height * that.ratio + that.padding * 2,\n      left: rect.x * that.ratio - that.padding + that.offsetLeft,\n      top: rect.y * that.ratio - that.padding + that.offsetTop\n    }\n    if (rect.ID) {\n      that.targetId = rect.ID\n    }\n    that.setStyle()\n  }\n  show() {\n    this.el.style.display = 'block'\n  }\n  hide() {\n    this.el.style.display = 'none'\n  }\n  setStyle() {\n    let styles = 'display: block;'\n    for (let prop in this.styles) {\n      if (this.styles.hasOwnProperty(prop)) {\n        styles += `${prop}:${this.styles[prop]}px;`\n      }\n    }\n    this.el.style.cssText = styles\n  }\n  setOffset(el) {\n    const rect = el.getBoundingClientRect()\n    this.ratio = rect.width / el.width\n\n    this.offsetLeft = rect.left\n    this.offsetTop = rect.top\n  }\n  static template = '<div class=\"editor-action-border\">' +\n    '<button class=\"icon-btn zoom\"><i class=\"iconfont icon-Zoom\"></i></button>' +\n    '</div>'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/elements/border.js","import * as Elements from '../elements'\nimport { firstToUpperCase } from '@/utils/shared'\n\nclass BaseAction {\n  constructor(element) {\n    this.id = element.ID\n    this.type = element.TYPE\n    this.props = element.getProps()\n  }\n  add(layer) {\n    const element = layer.elementController.addElement(\n      new Elements[(firstToUpperCase(this.type))](this.props),\n      this.id\n    )\n\n    element.draw(layer.editCtx)\n  }\n  delete(layer) {\n    layer.elementController.removeElement(this.id)\n    layer.redrawEditCanvas()\n  }\n}\n\nexport class Add extends BaseAction {\n  constructor(element) {\n    super(element)\n  }\n  undo(layer) {\n    this.delete(layer)\n  }\n  redo(layer) {\n    this.add(layer)\n  }\n}\n\nexport class Delete extends BaseAction {\n  constructor(element) {\n    super(element)\n  }\n  undo(layer) {\n    this.add(layer)\n  }\n  redo(layer) {\n    this.delete(layer)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/editActions.js","export default class ElementController {\n  constructor() {\n    // 元素集合\n    this.elements = {}\n    // 元素添加计数\n    this.count = 0\n    // 元素层级关系\n    this.zindex = []\n  }\n  getElement(id) {\n    return this.elements[id]\n  }\n  getElements() {\n    const elements = []\n    this.eachElements(element => {\n      elements.push(element)\n    })\n    return elements\n  }\n  addElement(element, id) {\n    id = id || ++this.count\n    element.ID = id\n\n    this.elements[id] = element\n    this.zindex.push(id)\n    return element\n  }\n  removeElement(id) {\n    const element = this.elements[id]\n    if (element) {\n      delete this.elements[id]\n      this.zindex.splice(this.zindex.indexOf(id), 1)\n    }\n  }\n  eachElements(callback) {\n    const length = this.zindex.length\n\n    for (let i = 0; i < length; i++) {\n      const id = this.zindex[i]\n      if (callback(this.elements[id], id)) {\n        break\n      }\n    }\n  }\n  hasElements() {\n    return !!this.zindex.length\n  }\n  reset() {\n    this.elements = {}\n    this.count = 0\n    this.zindex.length = 0\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/elements/controller.js","import Handler from '@/plugins/handler'\nimport History from './history'\nimport * as Actions from './editActions'\nimport { Border, Gather } from '../elements'\nimport ElementController from '../elements/controller'\nimport { firstToUpperCase } from '@/utils/shared'\n\n/**\n * 图层\n */\nexport default class Layer extends ElementController {\n  constructor() {\n    super()\n    const that = this\n\n    that.canvas = null\n    that.mainCtx = null\n    that.width = null\n    that.height = null\n\n    that.handler = new Handler({\n      // 遍历元素，用于事件触发时确定选取的元素是哪个\n      each(callback) {\n        that.elementController.eachElements(element => {\n          callback(element, element.ID)\n        })\n      }\n    })\n\n    that.border = new Border()\n    that.history = new History()\n    // 编辑层元素控制器\n    that.elementController = new ElementController()\n    that.tools = {}\n    that.currentElement = null\n    that.currentAction = null\n  }\n  init() {\n    const that = this\n\n    that.create()\n    that.addEventHandler()\n\n    return that\n  }\n  create() {\n    const that = this\n\n    // 主画布，存储所有已保存的操作的结果\n    that.canvas = document.createElement('canvas')\n    that.canvas.className = 'editor-main'\n    that.mainCtx = that.canvas.getContext('2d')\n\n    // 临时画布，用于元素的位移/属性发生变化时的绘制，变化结束清空画布\n    that.tempCanvas = document.createElement('canvas')\n    that.tempCanvas.className = 'editor-temp'\n    that.tempCtx = that.tempCanvas.getContext('2d')\n\n    // 编辑画布，存储当前操作的所有元素的集合，当前操作结束后清空画布\n    that.editCanvas = document.createElement('canvas')\n    that.editCanvas.className = 'editor-edit'\n    that.editCanvas.style.pointerEvents = 'auto'\n    that.editCtx = that.editCanvas.getContext('2d')\n  }\n  render(el) {\n    el.appendChild(this.canvas)\n    el.appendChild(this.editCanvas)\n    el.appendChild(this.tempCanvas)\n    this.border.render(el)\n  }\n  destory(el) {\n    el.removeChild(this.canvas)\n    // ...待完善\n  }\n  reset() {\n    this.clearCanvas('main')\n    this.clearCanvas('temp')\n    this.clearCanvas('edit')\n    this.history.reset()\n    this.elementController.reset()\n    super.reset()\n  }\n  setSize(width, height) {\n    const that = this\n    that.width = that.canvas.width = that.tempCanvas.width = that.editCanvas.width = width\n    that.height = that.canvas.height = that.tempCanvas.height = that.editCanvas.height = height\n    this.border.setOffset(this.canvas)\n    this.handler.setRatio()\n  }\n  selectElement(element) {\n    const that = this\n\n    // 获取并设置当前元素状态\n    that.currentElement =\n      typeof element === 'object' ? element : that.getElement(element)\n\n    // 绘制选中框\n    that.border.draw(that.currentElement)\n  }\n  unselectElement() {\n    const that = this\n\n    that.currentElement = null\n    that.border.hide()\n  }\n  /**\n   * 重绘显示层元素\n   */\n  redraw() {\n    const that = this\n\n    that.mainCtx.clearRect(0, 0, that.width, that.height)\n\n    that.eachElements(element => {\n      if (that.isValidElement(element)) {\n        element.draw(that.mainCtx)\n      }\n    })\n  }\n  /**\n   * 重绘编辑层元素\n   */\n  redrawEditCanvas() {\n    const that = this\n\n    that.editCtx.clearRect(0, 0, that.width, that.height)\n\n    that.elementController.eachElements(element => {\n      element.draw(that.editCtx)\n    })\n  }\n  saveEdits(props) {\n    props = Object.assign({ $type: 'global' }, props)\n\n    const elements = this.elementController.getElements()\n    let element = null\n\n    if (elements.length > 1) {\n      element = this.addElement(new Gather({ elements }))\n    } else {\n      element = this.addElement(elements[0])\n    }\n\n    if (!props.$type) {\n      props.$frameIndex = this._getFrameIndex()\n    }\n\n    element.setProps(props)\n    element.draw(this.mainCtx)\n\n    return element\n  }\n  isValidElement(element) {\n    const frameIndex = this._getFrameIndex()\n    return (\n      element &&\n      (element.$frameIndex === frameIndex || element.$type === 'global')\n    )\n  }\n  clearCanvas(name) {\n    this[`${name}Ctx`].clearRect(0, 0, this.width, this.height)\n  }\n  resetEditCanvas() {\n    this.elementController.reset()\n    this.history.reset()\n    this.clearCanvas('edit')\n  }\n  record(type, element, prevProps) {\n    type = firstToUpperCase(type)\n    if (Actions[type]) {\n      this.history.push({\n        action: new Actions[type](element, prevProps)\n      })\n    }\n  }\n  addEventHandler() {\n    const that = this\n\n    that.border.zoom.on('onpointerdown', that.tools.zoom.handler.onpointerdown)\n    that.border.zoom.on('onpointermove', that.tools.zoom.handler.onpointermove)\n\n    that.handler\n      .bind(that.editCanvas)\n      .on('onpointerdown', onpointerdown)\n      .on('onpointermove', onpointermove)\n      .on('onpointerup', onpointerup)\n      .on('onaction', onaction)\n\n    function onpointerdown() {\n      that.tools.move.handler.onpointerdown(...arguments)\n      that.currentAction &&\n        that.tools[that.currentAction].handler.onpointerdown(...arguments)\n    }\n    function onpointermove() {\n      that.tools.move.handler.onpointermove(...arguments)\n      that.currentAction &&\n        that.tools[that.currentAction].handler.onpointermove(...arguments)\n    }\n    function onpointerup() {\n      that.currentAction &&\n        that.tools[that.currentAction].handler.onpointerup(...arguments)\n      that.tools.move.handler.onpointerup(...arguments)\n    }\n    function onaction(action) {\n      that.currentAction = action\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/layer.js","import * as Elements from '../elements'\nimport { firstToUpperCase } from '@/utils/shared'\n\nclass BaseAction {\n  constructor(element) {\n    this.id = element.ID\n    this.type = element.TYPE\n    this.props = element.getProps()\n  }\n  add(layer) {\n    const element = layer.addElement(\n      new Elements[(firstToUpperCase(this.type))](this.props),\n      this.id\n    )\n\n    element.draw(layer.mainCtx)\n  }\n  delete(layer) {\n    layer.removeElement(this.id)\n    layer.redraw()\n  }\n}\n\nexport class Add extends BaseAction {\n  constructor(element) {\n    super(element)\n  }\n  undo(editor) {\n    this.delete(editor.layer)\n  }\n  redo(editor) {\n    this.add(editor.layer)\n  }\n}\n\nexport class Delete extends BaseAction {\n  constructor(element) {\n    super(element)\n  }\n  undo(editor) {\n    this.add(editor.layer)\n  }\n  redo(editor) {\n    this.delete(editor.layer)\n  }\n}\n\nexport class Modify {\n  constructor(element, prevProps) {\n    this.id = element.ID\n    this.newProps = element.getProps()\n    this.prevProps = prevProps\n  }\n  undo(editor) {\n    const element = editor.layer.getElement(this.id)\n    element.setProps(this.prevProps)\n    editor.layer.redraw()\n  }\n  redo(editor) {\n    const element = editor.layer.getElement(this.id)\n    element.setProps(this.newProps)\n    editor.layer.redraw()\n  }\n}\n\n// 切换帧\nexport class SwitchFrmae {\n  constructor(originIndex, newIndex) {\n    this.originIndex = originIndex\n    this.newIndex = newIndex\n  }\n  undo(editor) {\n    editor.gif.jump(this.originIndex, 'absolute')\n  }\n  redo(editor) {\n    editor.gif.jump(this.newIndex, 'absolute')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/cores/mainActions.js","import Builder from 'gif.js'\nimport Gif from './cores/gif'\nimport Layer from './cores/layer'\nimport History from './cores/history'\nimport * as Actions from './cores/mainActions'\nimport { isProduction } from '@/config'\nimport { noop, firstToUpperCase } from '@/utils/shared'\n\nexport default class Editor {\n  constructor(options) {\n    this.el = options.el\n    this.gif = new Gif()\n    this.layer = new Layer()\n    this.layer._getFrameIndex = () => this.gif.frameIndex\n    this.history = new History()\n  }\n  init() {\n    const that = this\n\n    that.layer.init()\n    that.gif.init()\n\n    that.gif.on('frameIndex', that.layer.redraw.bind(that.layer))\n    that.gif.parser.once('parseEnd', that.render.bind(that))\n    that.gif.parser.on('parseEnd', () => {\n      that.layer.setSize(that.gif.canvas.width, that.gif.canvas.height)\n    })\n\n    return that\n  }\n  render() {\n    this.el = document.querySelector(this.el)\n    this.gif.render(this.el)\n    this.layer.render(this.el)\n  }\n  destory() {\n    this.gif.pause()\n    this.gif.destory(this.el)\n    this.layer.destory(this.el)\n  }\n  createGif() {\n    const that = this\n    const framesLength = that.gif.frames.length\n    let canvas = document.createElement('canvas')\n    let ctx = canvas.getContext('2d')\n    const options = {\n      workers: 2,\n      quality: 10\n    }\n\n    if (isProduction) {\n      // options.workerScript = assetsDomain + 'gif.worker.js'\n      options.workerScript =\n        'https://gif.webfed.cn/gif.worker.js'\n    }\n    if (!that.builder) {\n      that.builder = new Builder(options)\n      that.builder.on('finished', blob => {\n        that.gif.emit('finished', URL.createObjectURL(blob))\n        that.builder.frames.length = 0\n        that.builder.imageParts.length = 0\n        that.builder.options.width = null\n        that.builder.options.height = null\n        that.builder.abort()\n        canvas = null\n        ctx = null\n      })\n\n      that.builder.on('progress', value => {\n        that.gif.emit('progress', value)\n      })\n    }\n\n    const width = (canvas.width = that.gif.canvas.width)\n    const height = (canvas.height = that.gif.canvas.height)\n\n    for (let i = 0; i < framesLength; i++) {\n      ctx.clearRect(0, 0, width, height)\n      ctx.putImageData(that.gif.frames[i].data, 0, 0)\n\n      that.layer.eachElements(element => {\n        if (element.$type === 'global' || element.$frameIndex === i) {\n          element.draw(ctx)\n        }\n      })\n\n      const imageData = ctx.getImageData(0, 0, width, height)\n\n      that.builder.addFrame(imageData, {\n        delay: that.gif.frames[i].delay ? that.gif.frames[i].delay * 10 : 100\n      })\n    }\n\n    that.builder.render()\n  }\n  reset() {\n    this.gif.reset()\n    this.layer.reset()\n    this.history.reset()\n  }\n  addTool(name, toolFn) {\n    if (this.layer.tools[name]) return\n    const tool = {\n      controller: {},\n      handler: {}\n    }\n\n    Object.assign(tool, toolFn(this))\n\n    tool.handler = Object.assign(\n      {\n        onpointerdown: noop,\n        onpointermove: noop,\n        onpointerup: noop\n      },\n      tool.handler\n    )\n\n    this.layer.tools[name] = tool\n\n    return this\n  }\n  useTool(name) {\n    if (!this.layer.tools[name]) return\n    this.changeAction(name)\n    return this.layer.tools[name].controller\n  }\n  changeAction(name) {\n    this.layer.handler.emit('onaction', name)\n  }\n  addRecord({ action, info }) {\n    const length = this.history.stack.length\n\n    if (!info) {\n      info = { frameIndex: this.gif.frameIndex }\n    }\n\n    if (length) {\n      // 跳帧操作需要在前面加入一条跳帧记录\n      const lastIndex = this.history.stack[length - 1].info.frameIndex\n\n      if (lastIndex !== info.frameIndex) {\n        this.history.push({\n          action: new Actions.SwitchFrmae(lastIndex, info.frameIndex)\n        })\n      }\n    }\n\n    this.history.push({ action, info })\n  }\n  record(type, element, prevProps) {\n    type = firstToUpperCase(type)\n\n    if (Actions[type]) {\n      const record = {\n        action: new Actions[type](element, prevProps)\n      }\n\n      if (typeof element.$frameIndex !== 'undefined') {\n        record.info = { frameIndex: element.$frameIndex }\n      }\n\n      this.addRecord(record)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/index.js","export default function(editor) {\n  const layer = editor.layer\n\n  const isMoveElement = function(layer) {\n    return layer.currentElement && layer.currentElement.MOVE\n  }\n\n  const handler = {\n    onpointerdown({ id }) {\n      if (id && layer.currentAction) {\n        const element = layer.elementController.getElement(id)\n\n        if (element.MOVE) {\n          layer.selectElement(element)\n        }\n      }\n    },\n    onpointermove({ x, y }) {\n      if (isMoveElement(layer)) {\n        layer.currentElement.x += x\n        layer.currentElement.y += y\n        layer.clearCanvas('temp')\n        layer.currentElement.draw(layer.tempCtx)\n        layer.border.draw(layer.currentElement)\n      }\n    },\n    onpointerup(moved, id) {\n      if (isMoveElement(layer)) {\n        // 点击了空白区域\n        if (!id && !moved) {\n          layer.unselectElement()\n        }\n      }\n    }\n  }\n\n  return { handler }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/tools/move.js","export default function(editor) {\n  const layer = editor.layer\n\n  let scale = null\n\n  const handler = {\n    onpointerdown() {\n      scale = layer.currentElement.width / layer.currentElement.height\n    },\n    onpointermove({ x, y }) {\n      const value = (x + y) / 2 * 1.5\n      const min = 10\n      let width = layer.currentElement.width + value\n      let height = layer.currentElement.height + value / scale\n\n      if (width <= min || height <= min) {\n        width = layer.currentElement.width\n        height = layer.currentElement.height\n      }\n\n      layer.currentElement.setProps({\n        width,\n        height\n      })\n      layer.clearCanvas('temp')\n      layer.currentElement.draw(layer.tempCtx)\n      layer.border.draw(layer.currentElement)\n    }\n  }\n  return { handler }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/tools/zoom.js","import { Text } from '../elements'\n\nexport default function(editor) {\n  const layer = editor.layer\n\n  let element = null\n\n  function reset() {\n    setTimeout(() => {\n      element = null\n      editor.changeAction(null)\n      layer.resetEditCanvas()\n      layer.unselectElement()\n      layer.clearCanvas('temp')\n    })\n  }\n\n  const controller = {\n    add(props = {}) {\n      element = layer.elementController.addElement(new Text(props))\n      // 居中画布\n      props.x = element.x = (layer.width - element.width) / 2\n      props.y = element.y = (layer.height - element.height) / 2\n\n      layer.selectElement(element)\n      layer.clearCanvas('temp')\n      element.draw(layer.tempCtx)\n    },\n    restore() {\n      reset()\n    },\n    // 编辑\n    modify(props) {\n      const prevText = element.text\n\n      element.setProps(props)\n\n      // 修改了文字需要更新宽高\n      if (props.text && props.text !== prevText) {\n        element.setSize()\n        layer.selectElement(element)\n      }\n\n      layer.clearCanvas('temp')\n      element.draw(layer.tempCtx)\n    },\n    // 保存编辑\n    save(props) {\n      const element = layer.saveEdits(props)\n      editor.record('add', element)\n      reset()\n    },\n    getCurrentElement() {\n      return element\n    }\n  }\n\n  return { controller }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/tools/text.js","import { Line } from '../elements'\n\nexport default function(editor) {\n  const layer = editor.layer\n\n  let line = null\n  let lineProps = {}\n\n  function reset() {\n    setTimeout(() => {\n      lineProps = {}\n      line = null\n      editor.changeAction(null)\n      layer.resetEditCanvas()\n    })\n  }\n\n  const controller = {\n    modify(props) {\n      Object.assign(lineProps, props)\n    },\n    save(props) {\n      if (layer.elementController.hasElements()) {\n        const element = layer.saveEdits(props)\n        editor.record('add', element)\n      }\n      reset()\n    },\n    restore() {\n      reset()\n    }\n  }\n\n  const handler = {\n    onpointerdown({ x, y }) {\n      line = new Line(lineProps)\n      line.moveTo(layer.tempCtx, ~~x, ~~y)\n    },\n    onpointermove({ move }) {\n      layer.clearCanvas('temp')\n      line.lineTo(layer.tempCtx, ~~move.x, ~~move.y)\n    },\n    onpointerup(moved) {\n      if (!moved) {\n        line.lineTo(layer.tempCtx, line.points[0] + 0.1, line.points[1] + 0.1)\n      }\n      layer.clearCanvas('temp')\n      layer.record('add', layer.elementController.addElement(line))\n      line.draw(layer.editCtx)\n    }\n  }\n  return { controller, handler }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/tools/pencil.js","import Editor from './index'\n\nimport move from './tools/move'\nimport zoom from './tools/zoom'\nimport text from './tools/text'\nimport pencil from './tools/pencil'\n\nconst editor = new Editor({\n  el: '.editor-canvas-container'\n})\n  .addTool('move', move)\n  .addTool('zoom', zoom)\n  .addTool('text', text)\n  .addTool('pencil', pencil)\n\nexport default editor\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/instance.js","import { isSupportTouch } from './shared'\n\nexport const POINTER_DOWN = isSupportTouch ? 'touchstart' : 'mousedown'\nexport const POINTER_MOVE = isSupportTouch ? 'touchmove' : 'mousemove'\nexport const POINTER_UP = isSupportTouch ? 'touchend' : 'mouseup'\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/constants.js","import {\n  addListener,\n  removeListener,\n  noop,\n  containsPoint\n} from '@/utils/shared'\nimport { POINTER_DOWN, POINTER_MOVE, POINTER_UP } from '@/utils/constants'\nimport EventEmitter from '@/plugins/eventEmitter'\n\n/**\n * 事件处理器\n */\nexport default class Handler extends EventEmitter {\n  constructor(options = {}) {\n    super()\n\n    const that = this\n\n    that.each = options.each || noop\n    that.last = {}\n    that.elementId = null\n    that.isMoving = false\n    that.touchDelay = 3\n\n    // 绑定上下文\n    ;['pointdown', 'pointmove', 'pointup'].forEach(name => {\n      that[name] = that[name].bind(that)\n    })\n  }\n\n  bind(el) {\n    const that = this\n\n    that.el = el\n    that.setRatio()\n    addListener(that.el, POINTER_DOWN, that.pointdown, { passive: false })\n    return that\n  }\n\n  setRatio() {\n    const that = this\n    that.rect = that.el.getBoundingClientRect()\n    that.ratio =\n      that.el.tagName === 'CANVAS' ? that.el.width / that.rect.width : 1\n  }\n\n  pointdown(e) {\n    e.preventDefault()\n\n    const that = this\n    const touches = e.touches\n\n    if (touches) {\n      if (touches.length === 2) {\n        that.pinchstart(touches)\n      } else if (touches.length === 1) {\n        that.dragstart(touches[0])\n      }\n    } else {\n      that.dragstart(e)\n    }\n\n    addListener(document, POINTER_MOVE, that.pointmove, { passive: false })\n    addListener(document, POINTER_UP, that.pointup)\n  }\n\n  pointmove(e) {\n    e.preventDefault()\n\n    const that = this\n    const touches = e.touches\n\n    if (touches) {\n      if (touches.length === 2) {\n        that.pinchmove(touches)\n      } else if (touches.length === 1) {\n        that.dragmove(touches[0])\n      }\n    } else {\n      that.dragmove(e)\n    }\n  }\n\n  pointup() {\n    const that = this\n\n    removeListener(document, POINTER_MOVE, that.pointmove)\n    removeListener(document, POINTER_UP, that.pointup)\n\n    that.emit('onpointerup', that.isMoving, that.elementId)\n\n    that.elementId = null\n    that.isMoving = false\n  }\n\n  dragstart(point) {\n    const that = this\n\n    that.last.move = {\n      x: (point.clientX - that.rect.left) * that.ratio,\n      y: (point.clientY - that.rect.top) * that.ratio\n    }\n    that.touchDelay = 3\n\n    that.each((element, id) => {\n      if (containsPoint(element, that.last.move.x, that.last.move.y)) {\n        that.elementId = id\n      }\n    })\n    that.emit('onpointerdown', { ...that.last.move, id: that.elementId })\n  }\n\n  dragmove(point) {\n    const that = this\n    const move = {\n      x: (point.clientX - that.rect.left) * that.ratio,\n      y: (point.clientY - that.rect.top) * that.ratio\n    }\n    const x = move.x - that.last.move.x\n    const y = move.y - that.last.move.y\n\n    that.last.move = move\n\n    // 延迟防止手误操作\n    if (that.touchDelay) {\n      that.touchDelay--\n      return\n    }\n\n    that.isMoving = true\n\n    that.emit('onpointermove', {\n      move,\n      x,\n      y,\n      id: that.elementId\n    })\n  }\n\n  pinchstart() {}\n  pinchmove() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/handler.js"],"sourceRoot":""}